<?xml version="1.0" encoding="utf-8"?>
<modification>
    <name>Admin Modifications</name>
    <code>mijoshop_admin</code>
    <version>1.0.0</version>
    <link>http://www.miwisoft.com</link>
    <author>Miwisoft LLC</author>

    <file path="admin/model/tool/image.php" >
        <operation error="log">
            <search><![CDATA[return HTTPS_CATALOG . 'image/' . $new_image;]]></search>
            <add position="replace"><![CDATA[           return HTTPS_IMAGE . $new_image; #mijoshop-start]]></add>
        </operation>
        <operation error="log">
            <search><![CDATA[return HTTP_CATALOG . 'image/' . $new_image;]]></search>
            <add position="replace"><![CDATA[           return HTTP_IMAGE . $new_image; #mijoshop-start]]></add>
        </operation>
    </file>

    <file path="admin/model/localisation/language.php" >
        <operation error="log">
            <search  mijomod="true"><![CDATA[$query = $this->db->query("SELECT DISTINCT * FROM " . DB_PREFIX . "language WHERE language_id = '" . (int)$language_id . "'");]]></search>
            <add position="replace" offset="2"><![CDATA[
        #mijoshop-start
        $language_data = MijoShop::get('db')->getLanguage($language_id);

        return $language_data;
        #mijoshop-end
        ]]></add>
        </operation>
        <operation error="log">
            <search mijomod="true"><![CDATA[public function getLanguages($data = array()) {]]></search>
            <add position="before"><![CDATA[
    #mijoshop-start
    public function getLanguages($data = array()) {
        $language_data = $this->cache->get('language');

        if (!$language_data) {
            $language_data = MijoShop::get('db')->getLanguageList();

            // $this->cache->set('language', $language_data);
        }

        return $language_data;
    }
    #mijoshop-end
    ]]></add>
        </operation>
        <operation error="log">
            <search index="1"><![CDATA[public function getLanguages($data = array()) {]]></search>
            <add position="replace"><![CDATA[    public function getLanguagesOld($data = array()) { #mijoshop]]></add>
        </operation>
        <operation error="log">
            <search><![CDATA[$query = $this->db->query("SELECT COUNT(*) AS total FROM " . DB_PREFIX . "language");]]></search>
            <add position="replace"><![CDATA[        $query = $this->db->query("SELECT COUNT(*) AS total FROM " . DB_PREFIX . "languages"); #mijoshop]]></add>
        </operation>
    </file>

    <file path="admin/controller/common/header.php">
        <operation error="log">
            <search><![CDATA[$this->load->model('setting/store');]]></search>
            <add position="before"><![CDATA[
            #mijoshop-start
            $processing_total = $this->model_sale_order->getTotalOrdersByProcessingStatus();

            $data['alert_order'] = $return_total + $processing_total;
            $data['alert_customer'] = $customer_total;
            $data['alert_product'] = $product_total + $review_total + $affiliate_total;

            $this->load->language('common/menu');

            $this->load->model('user/user');

            $this->load->model('tool/image');

            $user_info = $this->model_user_user->getUser($this->user->getId());

            if ($user_info) {
                $data['firstname'] = $user_info['firstname'];
                $data['lastname'] = $user_info['lastname'];
                $data['username'] = $user_info['username'];

                $data['user_group'] = $user_info['user_group'] ;

                if (is_file(DIR_IMAGE . $user_info['image'])) {
                    $data['image'] = $this->model_tool_image->resize($user_info['image'], 45, 45);
                } else {
                    $data['image'] = $this->model_tool_image->resize('no_image.png', 45, 45);
                }
            } else {
                $data['username'] = '';
                $data['image'] = '';
            }
            #mijoshop-end
            ]]></add>
        </operation>
		
		<operation error="log">
            <search><![CDATA[$results = $this->model_setting_store->getStores();]]></search>
            <add position="before"><![CDATA[            $data['url_user'] = $this->url->link('user/user/edit', 'user_id='.$this->user->getId().'&token=' . $this->session->data['token'], 'SSL'); #mijoshop-start]]></add>
        </operation>
    </file>

    <file path="admin/controller/sale/order.php">
        <operation error="log">
            <search><![CDATA[curl_setopt($curl, CURLOPT_COOKIE, session_name() . '=' . $this->session->data['cookie'] . ';');]]></search>
            <add position="replace"><![CDATA[curl_setopt($curl, CURLOPT_COOKIE, $this->session->data['cookie']['name'].'=' . $this->session->data['cookie']['id'] . ';'); #mijoshop-start]]></add>
        </operation>        
		<operation error="log">
            <search><![CDATA[if ($key != 'route' && $key != 'token' && $key != 'store_id') {]]></search>
            <add position="replace"><![CDATA[if ($key != 'route' && $key != 'token' && $key != 'Itemid') { #mijoshop-start
					if ($key == 'view' && $value == 'admin') {
						continue;
					} #mijoshop-end]]></add>
        </operation>
		<operation error="log">
            <search><![CDATA[foreach ($this->request->get as $key => $value) {]]></search>
            <add position="before"><![CDATA[				if ($this->request->post['view'] == 'admin') { #mijoshop-start
				unset($this->request->post['view']);
			} #mijoshop-end]]></add>
        </operation>
        <operation error="log">
            <search><![CDATA[$data['shipping'] = $this->url->link('sale/order/shipping', 'token=' . $this->session->data['token'], 'SSL');]]></search>
            <add position="replace"><![CDATA[$data['shipping'] = $this->url->link('sale/order/shipping', 'format=raw&tmpl=component&token=' . $this->session->data['token'], 'SSL');#mijoshop-start]]></add>
        </operation>
        <operation error="log">
            <search><![CDATA[$data['shipping'] = $this->url->link('sale/order/shipping', 'token=' . $this->session->data['token'] . '&order_id=' . (int)$this->request->get['order_id'], 'SSL');]]></search>
            <add position="replace"><![CDATA[$data['shipping'] = $this->url->link('sale/order/shipping', 'format=raw&tmpl=component&token=' . $this->session->data['token'] . '&order_id=' . (int)$this->request->get['order_id'], 'SSL');#mijoshop-start]]></add>
        </operation>
        <operation error="log">
            <search><![CDATA[$data['invoice'] = $this->url->link('sale/order/invoice', 'token=' . $this->session->data['token'], 'SSL');]]></search>
            <add position="replace"><![CDATA[$data['invoice'] = $this->url->link('sale/order/invoice', 'format=raw&tmpl=component&token=' . $this->session->data['token'], 'SSL');#mijoshop-start]]></add>
        </operation>
        <operation error="log">
            <search><![CDATA[$data['invoice'] = $this->url->link('sale/order/invoice', 'token=' . $this->session->data['token'] . '&order_id=' . (int)$this->request->get['order_id'], 'SSL');]]></search>
            <add position="replace"><![CDATA[$data['invoice'] = $this->url->link('sale/order/invoice', 'format=raw&tmpl=component&token=' . $this->session->data['token'] . '&order_id=' . (int)$this->request->get['order_id'], 'SSL');#mijoshop-start]]></add>
        </operation>
    </file>

    <file path="admin/controller/common/menu.php">
        <operation error="log">
            <search><![CDATA[$data['text_openbay_order_import'] = $this->language->get('text_openbay_order_import');]]></search>
            <add position="after"><![CDATA[
        #mijoshop-start
        $base = MijoShop::get('base');
        $installed_version = (string)$base->getMijoshopVersion();
        $latest_version = (string)$base->getLatestMijoshopVersion();
        $version_status = version_compare($installed_version, $latest_version);
        $data['version'] = $installed_version;

        if ($version_status == 0) {
            $data['text_version_info'] = JText::_('COM_MIJOSHOP_CPANEL_LATEST_VERSION_INSTALLED');
            $data['version_class'] = "";
        }
        elseif($version_status == -1) {
            $data['text_version_info'] = JText::_('COM_MIJOSHOP_CPANEL_OLD_VERSION');
            $data['version_class'] = "version-old";
        }
        else {
            $data['text_version_info'] = JText::_('COM_MIJOSHOP_CPANEL_NEWER_VERSION');
            $data['version_class'] = "version-not-released";
        }
        #mijoshop-end
            ]]></add>
        </operation>
    </file>

    <file path="admin/view/template/catalog/product_form.tpl">
   		<operation error="log">
   			<search><![CDATA[<form action="<?php echo $action; ?>" method="post" enctype="multipart/form-data" id="form-product" class="form-horizontal">]]></search>
   			<add position="after"><![CDATA[		<script language="text/javascript">
   			function submitbutton(pressbutton) {
   				<?php foreach ($languages as $language) { ?>
   					<?php echo MijoShop::get('base')->editor()->save("product_description[".$language['language_id']."][description]"); ?>
   				<?php } ?>
   				submitform(pressbutton);
   			}
   		</script>
   		]]></add>
   		</operation>
   		<operation error="log">
   			<search mijomod="true"><![CDATA[<textarea name="product_description[<?php echo $language['language_id']; ?>][description]" placeholder="<?php echo $entry_description; ?>" id="input-description<?php echo $language['language_id']; ?>"><?php echo isset($product_description[$language['language_id']]) ? $product_description[$language['language_id']]['description'] : ''; ?></textarea>]]></search>
   			<add position="replace"><![CDATA[
                        <?php
                          $desc = isset($product_description[$language['language_id']]) ? $product_description[$language['language_id']]['description'] : '';
                          echo MijoShop::get('base')->editor()->display("product_description[".$language['language_id']."][description]", $desc, '97% !important', '320', '50', '11');
                        ?>]]></add>
   		</operation>
    </file>

    <file path="admin/view/template/catalog/category_form.tpl">
   		<operation error="log">
   			<search><![CDATA[<form action="<?php echo $action; ?>" method="post" enctype="multipart/form-data" id="form-category" class="form-horizontal">]]></search>
   			<add position="after"><![CDATA[          <script language="text/javascript">
            function submitbutton(pressbutton) {
                <?php foreach ($languages as $language) { ?>
                    <?php echo MijoShop::get('base')->editor()->save("category_description[".$language['language_id']."][description]"); ?>
                <?php } ?>
                submitform(pressbutton);
            }
          </script>
   		]]></add>
   		</operation>
   		<operation error="log">
   			<search mijomod="true"><![CDATA[<textarea name="category_description[<?php echo $language['language_id']; ?>][description]" placeholder="<?php echo $entry_description; ?>" id="input-description<?php echo $language['language_id']; ?>" class="form-control"><?php echo isset($category_description[$language['language_id']]) ? $category_description[$language['language_id']]['description'] : ''; ?></textarea>]]></search>
   			<add position="replace"><![CDATA[
                        <?php
                        $desc = isset($category_description[$language['language_id']]) ? $category_description[$language['language_id']]['description'] : '';
                        echo MijoShop::get('base')->editor()->display("category_description[".$language['language_id']."][description]", $desc, '97% !important', '320', '50', '11');
                        ?>]]></add>
   		</operation>
    </file>

    <file path="admin/view/template/catalog/information_form.tpl">
   		<operation error="log">
   			<search><![CDATA[<form action="<?php echo $action; ?>" method="post" enctype="multipart/form-data" id="form-information" class="form-horizontal">]]></search>
   			<add position="after"><![CDATA[          <script language="text/javascript">
            function submitbutton(pressbutton) {
                <?php foreach ($languages as $language) { ?>
                    <?php echo MijoShop::get('base')->editor()->save("information_description[".$language['language_id']."][description]"); ?>
                <?php } ?>
                submitform(pressbutton);
            }
          </script>
   		]]></add>
   		</operation>
   		<operation error="log">
   			<search mijomod="true"><![CDATA[<textarea name="information_description[<?php echo $language['language_id']; ?>][description]" placeholder="<?php echo $entry_description; ?>" id="input-description<?php echo $language['language_id']; ?>" class="form-control"><?php echo isset($information_description[$language['language_id']]) ? $information_description[$language['language_id']]['description'] : ''; ?></textarea>]]></search>
   			<add position="replace"><![CDATA[
                        <?php
                          $desc = isset($information_description[$language['language_id']]) ? $information_description[$language['language_id']]['description'] : '';
                          echo MijoShop::get('base')->editor()->display("information_description[".$language['language_id']."][description]", $desc, '97% !important', '320', '50', '11');
                        ?>]]></add>
   		</operation>
    </file>

    <file path="admin/view/template/marketing/contact.tpl">
        <operation error="log">
            <search><![CDATA[function send(url) {]]></search>
            <add position="after"><![CDATA[    <?php echo MijoShop::get('base')->editor()->save("message"); ?>]]></add>
        </operation>
        
		<operation error="log">
            <search><![CDATA[<textarea name="message" placeholder="<?php echo $entry_message; ?>" id="input-message" class="form-control"></textarea>]]></search>
            <add position="replace"><![CDATA[<?php echo MijoShop::get('base')->editor()->display("message", "", '97% !important', '320', '50', '11'); ?>]]></add>
        </operation>
    </file>

    <file path="admin/view/template/common/menu.tpl">
        <operation error="log">
            <search><![CDATA[<li><a href="<?php echo $language; ?>"><?php echo $text_language; ?></a></li>]]></search>
            <add position="replace"><![CDATA[]]></add>
        </operation>
    </file>

    <file path="admin/controller/setting/setting.php">
        <operation error="skip">
            <search><![CDATA[$data['entry_product_limit'] = $this->language->get('entry_product_limit');]]></search>
            <add position="before"><![CDATA[		$data['entry_category_name_limit'] = $this->language->get('entry_category_name_limit'); #mijoshop-start]]></add>
        </operation>
        <operation error="skip">
            <search><![CDATA[$data['help_product_limit'] = $this->language->get('help_product_limit');]]></search>
            <add position="before"><![CDATA[		$data['help_category_name_limit'] = $this->language->get('help_category_name_limit'); #mijoshop-start]]></add>
        </operation>
        <operation error="skip">
            <search><![CDATA[if (isset($this->request->post['config_product_limit']))]]></search>
            <add position="before"><![CDATA[
        #mijoshop-start
		if (isset($this->request->post['config_category_name_limit'])) {
			$data['config_category_name_limit'] = $this->request->post['config_category_name_limit'];
		} elseif ($this->config->get('config_category_name_limit')) {
			$data['config_category_name_limit'] = $this->config->get('config_category_name_limit');
		} else {
		    $data['config_category_name_limit'] = 20;
		}
		#mijoshop-end
		]]></add>
        </operation>
        <operation error="skip">
            <search><![CDATA[$server = HTTPS_CATALOG;]]></search>
            <add position="replace"><![CDATA[$server = HTTPS_CATALOG.'components/com_mijoshop/opencart/'; #mijoshop-start]]></add>
        </operation>
        <operation error="skip">
            <search><![CDATA[$server = HTTP_CATALOG;]]></search>
            <add position="replace"><![CDATA[$server = HTTP_CATALOG.'components/com_mijoshop/opencart/'; #mijoshop-start]]></add>
        </operation>
        <operation error="skip" info="Mijoshop Settings">
            <search><![CDATA[$data['tab_server'] = $this->language->get('tab_server');]]></search>
            <add position="after"><![CDATA[
        #mijoshop-start
        $data['entry_mijoshop_pid'] = $this->language->get('entry_mijoshop_pid');
        $data['entry_mijoshop_enable_vqmod_cache'] = $this->language->get('entry_mijoshop_enable_vqmod_cache');
        $data['entry_mijoshop_show_header'] = $this->language->get('entry_mijoshop_show_header');
        $data['entry_mijoshop_show_footer'] = $this->language->get('entry_mijoshop_show_footer');
        $data['entry_mijoshop_show_cats_menu'] = $this->language->get('entry_mijoshop_show_cats_menu');
        $data['entry_mijoshop_trigger_content_plg'] = $this->language->get('entry_mijoshop_trigger_content_plg');
        $data['entry_mijoshop_fix_ie_cache'] = $this->language->get('entry_mijoshop_fix_ie_cache');
        $data['entry_mijoshop_mijoshop_display'] = $this->language->get('entry_mijoshop_mijoshop_display');
        $data['entry_mijoshop_button_class'] = $this->language->get('entry_mijoshop_button_class');
        $data['entry_mijoshop_comments'] = $this->language->get('entry_mijoshop_comments');
        $data['entry_mijoshop_currency'] = $this->language->get('entry_mijoshop_currency');
        $data['entry_mijoshop_contact'] = $this->language->get('entry_mijoshop_contact');
        $data['entry_mijoshop_mijosef_integration'] = $this->language->get('entry_mijoshop_mijosef_integration');
        $data['entry_mijoshop_set_input_width'] = $this->language->get('entry_mijoshop_set_input_width');
        $data['entry_mijoshop_acymailling_register'] = $this->language->get('entry_mijoshop_acymailling_register');
        $data['entry_mijoshop_acymailling_checkout'] = $this->language->get('entry_mijoshop_acymailling_checkout');
        $data['entry_mijoshop_check_j_block_status'] = $this->language->get('entry_mijoshop_check_j_block_status');
        $data['entry_mijoshop_firewall_lfi'] = $this->language->get('entry_mijoshop_firewall_lfi');
        $data['entry_mijoshop_firewall_rfi'] = $this->language->get('entry_mijoshop_firewall_rfi');
        $data['entry_mijoshop_firewall_sql'] = $this->language->get('entry_mijoshop_firewall_sql');
        $data['entry_mijoshop_firewall_xss'] = $this->language->get('entry_mijoshop_firewall_xss');

        if (isset($this->request->post['config_mijoshop'])) {
            $data['config_mijoshop'] = $this->request->post['config_mijoshop'];
        } else {
            $data['config_mijoshop'] = $this->config->get('config_mijoshop');
        }
        #mijoshop-end
            ]]></add>
        </operation>
        <operation error="skip">
            <search><![CDATA[if (isset($this->error['encryption'])) {]]></search>
            <add position="before"><![CDATA[
        #mijoshop-start
        if (!isset($data['config_mijoshop']) or !isset($data['config_mijoshop']['enable_vqmod_cache'])) {
            $data['config_mijoshop']['enable_vqmod_cache'] = 1;
        }

        if (!isset($data['config_mijoshop']) or !isset($data['config_mijoshop']['show_header'])) {
            $data['config_mijoshop']['show_header'] = 1;
        }

        if (!isset($data['config_mijoshop']) or !isset($data['config_mijoshop']['show_footer'])) {
            $data['config_mijoshop']['show_footer'] = 1;
        }

        if (!isset($data['config_mijoshop']) or !isset($data['config_mijoshop']['show_cats_menu'])) {
            $data['config_mijoshop']['show_cats_menu'] = 0;
        }

        if (!isset($data['config_mijoshop']) or !isset($data['config_mijoshop']['trigger_content_plg'])) {
            $data['config_mijoshop']['trigger_content_plg'] = 1;
        }

        if (!isset($data['config_mijoshop']) or !isset($data['config_mijoshop']['fix_ie_cache'])) {
            $data['config_mijoshop']['fix_ie_cache'] = 0;
        }

        if (!isset($data['config_mijoshop']) or !isset($data['config_mijoshop']['check_j_block_status'])) {
            $data['config_mijoshop']['check_j_block_status'] = 1;
        }

        if (!isset($data['config_mijoshop']) or !isset($data['config_mijoshop']['mijoshop_display'])) {
            $data['config_mijoshop']['mijoshop_display'] = 0;
        }

        if (!isset($data['config_mijoshop']) or !isset($data['config_mijoshop']['button_class'])) {
            $data['config_mijoshop']['button_class'] = '';
        }

        if (!isset($data['config_mijoshop']) or !isset($data['config_mijoshop']['comments'])) {
            $data['config_mijoshop']['comments'] = 0;
        }
		
		if (!isset($data['config_mijoshop']) or !isset($data['config_mijoshop']['currency'])) {
            $data['config_mijoshop']['currency'] = 1;
        }
		
		if (!isset($data['config_mijoshop']) or !isset($data['config_mijoshop']['show_contact'])) {
            $data['config_mijoshop']['show_contact'] = 0;
        }

        if (!isset($data['config_mijoshop']) or !isset($data['config_mijoshop']['mijosef_integration'])) {
            $data['config_mijoshop']['mijosef_integration'] = 0;
        }
        #mijoshop-end
            ]]></add>
        </operation>
    </file>

    <file path="admin/controller/dashboard/sale.php">
        <operation error="skip">
            <search><![CDATA[$data['sale'] = $this->url->link('sale/order', 'token=' . $this->session->data['token'], 'SSL');]]></search>
            <add position="before"><![CDATA[		$data['total'] = $this->currency->format($sale_total, $this->config->get('config_currency')); #mijoshop-start
			]]></add>
        </operation>
    </file>
	
    <file path="admin/controller/common/filemanager.php">
        <operation error="skip">
            <search><![CDATA['name'  => implode(' ', $name),]]></search>
            <add position="replace"><![CDATA['name'  => implode('', $name),]]></add>
        </operation>
    </file>
	
    <file path="admin/language/*/setting/setting.php">
        <operation error="skip" info="Mijoshop Settings">
            <search><![CDATA[$_['heading_title']                    = 'Settings';]]></search>
            <add  position="after"><![CDATA[
#mijoshop-start
$_['entry_mijoshop_pid']                    = 'Personal ID';
$_['entry_mijoshop_enable_vqmod_cache']     = 'Enable Modifications Cache';
$_['entry_mijoshop_show_header']            = 'Show header widgets';
$_['entry_mijoshop_show_footer']            = 'Show footer links';
$_['entry_mijoshop_show_cats_menu']         = 'Show categories menu';
$_['entry_mijoshop_trigger_content_plg']    = 'Load Plugins';
$_['entry_mijoshop_fix_ie_cache']           = 'Fix IE caching issues';
$_['entry_mijoshop_mijoshop_display']       = 'Default Product Display';
$_['entry_mijoshop_button_class']           = 'Button CSS class';
$_['entry_mijoshop_comments']               = 'Enable comments';
$_['entry_mijoshop_currency']               = 'Show Currency';
$_['entry_mijoshop_contact']               	= 'Show Contact';
$_['entry_mijoshop_check_j_block_status']   = 'Check Joomla activation status';
$_['entry_mijoshop_mijosef_integration']    = 'Enable MijoSEF integration';
$_['entry_mijoshop_set_input_width']   		= 'Set input width (120px)';
$_['entry_mijoshop_acymailling_register']   = 'Add to AcyMailing list after registration';
$_['entry_mijoshop_acymailling_checkout']   = 'Add to AcyMailing list after checkout';
$_['entry_mijoshop_firewall_lfi']           = 'LFI Protection';
$_['entry_mijoshop_firewall_rfi']           = 'RFI Protection';
$_['entry_mijoshop_firewall_sql']           = 'SQLi Protection';
$_['entry_mijoshop_firewall_xss']           = 'XSS Protection';
$_['error_language_no_in_db']               = 'Language wasn`t found in MijoShop database';
$_['error_language_wrong_language_code']    = ' : Wrong language code';
$_['error_language_no_directory']           = ' : Language wasn`t found in MijoShop Library or Joomla';
$_['success_language_updated']              = ' : Language was updated';
$_['entry_category_name_limit']             = 'Refine Search character';
$_['help_category_name_limit']              = 'Refine Search\'s category name character';
#mijoshop-end
            ]]></add>
        </operation>
    </file>

    <file path="admin/view/template/setting/setting.tpl">
        <operation error="skip">
            <search><![CDATA[<label class="col-sm-2 control-label" for="input-catalog-limit">]]></search>
            <add position="before" offset="1"><![CDATA[                <div class="form-group">
                  <label class="col-sm-2 control-label" for="input-category-name-limit"><span data-toggle="tooltip" title="<?php echo $help_category_name_limit; ?>"><?php echo $entry_category_name_limit; ?></span></label>
                  <div class="col-sm-10">
                    <input type="text" name="config_category_name_limit" value="<?php echo $config_category_name_limit; ?>" placeholder="<?php echo $entry_category_name_limit; ?>" id="input-category-name-limit" class="form-control" />
                  </div>
                </div>]]></add>
        </operation>
        <operation error="skip">
            <search><![CDATA[<input type="text" name="config_mail[smtp_password]"]]></search>
            <add position="replace"><![CDATA[<input type="password" name="config_mail[smtp_password]"]]></add>
        </operation>
        <operation error="skip">
            <search><![CDATA[<textarea name="config_google_analytics" rows="5" placeholder="<?php echo $entry_google_analytics; ?>" id="input-google-analytics" class="form-control"><?php echo $config_google_analytics; ?></textarea>]]></search>
            <add position="after" offset="3"><![CDATA[
                <!-- added MijoShop setting-->
                <div class="tab-pane" id="tab-mijoshop">
                    <fieldset>
	                    <legend>General</legend>
						<div class="form-group">
						  <label class="col-sm-2 control-label" for="config_mijoshop_pid"><?php echo $entry_mijoshop_pid; ?></label>
						  <div class="col-sm-10">
							<input type="password" name="config_mijoshop[pid]" id="config_mijoshop_pid" value="<?php echo $config_mijoshop['pid'] ?>" class="form-control" />
						  </div>
						</div>
						<div class="form-group">
						  <label class="col-sm-2 control-label"><?php echo $entry_mijoshop_enable_vqmod_cache; ?></label>
						  <div class="col-sm-10">
							<label class="radio-inline">
							  <?php if ($config_mijoshop['enable_vqmod_cache']) { ?>
							  <input type="radio" name="config_mijoshop[enable_vqmod_cache]" value="1" checked="checked" />
							  <?php echo $text_yes; ?>
							  <?php } else { ?>
							  <input type="radio" name="config_mijoshop[enable_vqmod_cache]" value="1" />
							  <?php echo $text_yes; ?>
							  <?php } ?>
							</label>
							<label class="radio-inline">
							  <?php if (!$config_mijoshop['enable_vqmod_cache']) { ?>
							  <input type="radio" name="config_mijoshop[enable_vqmod_cache]" value="0" checked="checked" />
							  <?php echo $text_no; ?>
							  <?php } else { ?>
							  <input type="radio" name="config_mijoshop[enable_vqmod_cache]" value="0" />
							  <?php echo $text_no; ?>
							  <?php } ?>
							</label>
							</div>
						</div>
						<div class="form-group">
						  <label class="col-sm-2 control-label"><?php echo $entry_mijoshop_fix_ie_cache; ?></label>
						  <div class="col-sm-10">
							<label class="radio-inline">
							  <?php if ($config_mijoshop['fix_ie_cache']) { ?>
							  <input type="radio" name="config_mijoshop[fix_ie_cache]" value="1" checked="checked" />
							  <?php echo $text_yes; ?>
							  <?php } else { ?>
							  <input type="radio" name="config_mijoshop[fix_ie_cache]" value="1" />
							  <?php echo $text_yes; ?>
							  <?php } ?>
							</label>
							<label class="radio-inline">
							  <?php if (!$config_mijoshop['fix_ie_cache']) { ?>
							  <input type="radio" name="config_mijoshop[fix_ie_cache]" value="0" checked="checked" />
							  <?php echo $text_no; ?>
							  <?php } else { ?>
							  <input type="radio" name="config_mijoshop[fix_ie_cache]" value="0" />
							  <?php echo $text_no; ?>
							  <?php } ?>
							</label>
							</div>
						</div>
	                </fieldset>
                    <fieldset>
	                    <legend>Layout</legend>
						<div class="form-group">
						  <label class="col-sm-2 control-label"><?php echo $entry_mijoshop_show_header; ?></label>
						  <div class="col-sm-10">
							<label class="radio-inline">
							  <?php if ($config_mijoshop['show_header']) { ?>
							  <input type="radio" name="config_mijoshop[show_header]" value="1" checked="checked" />
							  <?php echo $text_yes; ?>
							  <?php } else { ?>
							  <input type="radio" name="config_mijoshop[show_header]" value="1" />
							  <?php echo $text_yes; ?>
							  <?php } ?>
							</label>
							<label class="radio-inline">
							  <?php if (!$config_mijoshop['show_header']) { ?>
							  <input type="radio" name="config_mijoshop[show_header]" value="0" checked="checked" />
							  <?php echo $text_no; ?>
							  <?php } else { ?>
							  <input type="radio" name="config_mijoshop[show_header]" value="0" />
							  <?php echo $text_no; ?>
							  <?php } ?>
							</label>
							</div>
						</div>
						<div class="form-group">
						  <label class="col-sm-2 control-label"><?php echo $entry_mijoshop_show_footer; ?></label>
						  <div class="col-sm-10">
							<label class="radio-inline">
							  <?php if ($config_mijoshop['show_footer']) { ?>
							  <input type="radio" name="config_mijoshop[show_footer]" value="1" checked="checked" />
							  <?php echo $text_yes; ?>
							  <?php } else { ?>
							  <input type="radio" name="config_mijoshop[show_footer]" value="1" />
							  <?php echo $text_yes; ?>
							  <?php } ?>
							</label>
							<label class="radio-inline">
							  <?php if (!$config_mijoshop['show_footer']) { ?>
							  <input type="radio" name="config_mijoshop[show_footer]" value="0" checked="checked" />
							  <?php echo $text_no; ?>
							  <?php } else { ?>
							  <input type="radio" name="config_mijoshop[show_footer]" value="0" />
							  <?php echo $text_no; ?>
							  <?php } ?>
							</label>
							</div>
						</div>
						<div class="form-group">
						  <label class="col-sm-2 control-label"><?php echo $entry_mijoshop_show_cats_menu; ?></label>
						  <div class="col-sm-10">
							<label class="radio-inline">
							  <?php if ($config_mijoshop['show_cats_menu']) { ?>
							  <input type="radio" name="config_mijoshop[show_cats_menu]" value="1" checked="checked" />
							  <?php echo $text_yes; ?>
							  <?php } else { ?>
							  <input type="radio" name="config_mijoshop[show_cats_menu]" value="1" />
							  <?php echo $text_yes; ?>
							  <?php } ?>
							</label>
							<label class="radio-inline">
							  <?php if (!$config_mijoshop['show_cats_menu']) { ?>
							  <input type="radio" name="config_mijoshop[show_cats_menu]" value="0" checked="checked" />
							  <?php echo $text_no; ?>
							  <?php } else { ?>
							  <input type="radio" name="config_mijoshop[show_cats_menu]" value="0" />
							  <?php echo $text_no; ?>
							  <?php } ?>
							</label>
							</div>
						</div>
						<div class="form-group">
						  <label class="col-sm-2 control-label"><?php echo $entry_mijoshop_mijoshop_display; ?></label>
						  <div class="col-sm-10">
							<label class="radio-inline">
							  <?php if ($config_mijoshop['mijoshop_display']) { ?>
							  <input type="radio" name="config_mijoshop[mijoshop_display]" value="1" checked="checked" />
							  Grid
							  <?php } else { ?>
							  <input type="radio" name="config_mijoshop[mijoshop_display]" value="1" />
							  Grid
							  <?php } ?>
							</label>
							<label class="radio-inline">
							  <?php if (!$config_mijoshop['mijoshop_display']) { ?>
							  <input type="radio" name="config_mijoshop[mijoshop_display]" value="0" checked="checked" />
							  List
							  <?php } else { ?>
							  <input type="radio" name="config_mijoshop[mijoshop_display]" value="0" />
							  List
							  <?php } ?>
							</label>
							</div>
						</div>
						<div class="form-group">
						  <label class="col-sm-2 control-label"><?php echo $entry_mijoshop_currency; ?></label>
						  <div class="col-sm-10">
							<label class="radio-inline">
							  <?php if ($config_mijoshop['currency']) { ?>
							  <input type="radio" name="config_mijoshop[currency]" value="1" checked="checked" />
							  <?php echo $text_yes; ?>
							  <?php } else { ?>
							  <input type="radio" name="config_mijoshop[currency]" value="1" />
							  <?php echo $text_yes; ?>
							  <?php } ?>
							</label>
							<label class="radio-inline">
							  <?php if (!$config_mijoshop['currency']) { ?>
							  <input type="radio" name="config_mijoshop[currency]" value="0" checked="checked" />
							  <?php echo $text_no; ?>
							  <?php } else { ?>
							  <input type="radio" name="config_mijoshop[currency]" value="0" />
							  <?php echo $text_no; ?>
							  <?php } ?>
							</label>
						  </div>
						</div>
						<div class="form-group">
						  <label class="col-sm-2 control-label"><?php echo $entry_mijoshop_contact; ?></label>
						  <div class="col-sm-10">
							<label class="radio-inline">
							  <?php if ($config_mijoshop['show_contact']) { ?>
							  <input type="radio" name="config_mijoshop[show_contact]" value="1" checked="checked" />
							  <?php echo $text_yes; ?>
							  <?php } else { ?>
							  <input type="radio" name="config_mijoshop[show_contact]" value="1" />
							  <?php echo $text_yes; ?>
							  <?php } ?>
							</label>
							<label class="radio-inline">
							  <?php if (!$config_mijoshop['show_contact']) { ?>
							  <input type="radio" name="config_mijoshop[show_contact]" value="0" checked="checked" />
							  <?php echo $text_no; ?>
							  <?php } else { ?>
							  <input type="radio" name="config_mijoshop[show_contact]" value="0" />
							  <?php echo $text_no; ?>
							  <?php } ?>
							</label>
						  </div>
						</div>
						<div class="form-group">
						  <label class="col-sm-2 control-label"><?php echo $entry_mijoshop_button_class; ?></label>
						  <div class="col-sm-10">
							<input type="text" name="config_mijoshop[button_class]" value="<?php echo $config_mijoshop['button_class']; ?>" class="form-control" />
						  </div>
						</div>
	                </fieldset>
                    <fieldset>
	                    <legend>Firewall</legend>
						<div class="form-group">
						  <label class="col-sm-2 control-label"><?php echo $entry_mijoshop_firewall_lfi; ?></label>
						  <div class="col-sm-10">
							<select name="config_mijoshop[firewall_lfi]" class="form-control">
							  <?php if (!isset($config_mijoshop['firewall_lfi']) or $config_mijoshop['firewall_lfi'] == 'none') { ?>
							  <option value="none" selected="selected">None</option>
							  <?php } else { ?>
							  <option value="none">None</option>
							  <?php } ?>
							  <?php if ($config_mijoshop['firewall_lfi'] == 'get') { ?>
							  <option value="get" selected="selected">GET (URL data)</option>
							  <?php } else { ?>
							  <option value="get">GET (URL data)</option>
							  <?php } ?>
							  <?php if ($config_mijoshop['firewall_lfi'] == 'post') { ?>
							  <option value="post" selected="selected">POST (Form data)</option>
							  <?php } else { ?>
							  <option value="post">POST (Form data)</option>
							  <?php } ?>
							  <?php if ($config_mijoshop['firewall_lfi'] == 'both') { ?>
							  <option value="both" selected="selected">Both</option>
							  <?php } else { ?>
							  <option value="both">Both</option>
							  <?php } ?>
							  </select>
						  </div>
						</div>
						<div class="form-group">
						  <label class="col-sm-2 control-label"><?php echo $entry_mijoshop_firewall_rfi; ?></label>
						  <div class="col-sm-10">
							<select name="config_mijoshop[firewall_rfi]" class="form-control">
							  <?php if (!isset($config_mijoshop['firewall_rfi']) or $config_mijoshop['firewall_rfi'] == 'none') { ?>
							  <option value="none" selected="selected">None</option>
							  <?php } else { ?>
							  <option value="none">None</option>
							  <?php } ?>
							  <?php if ($config_mijoshop['firewall_rfi'] == 'get') { ?>
							  <option value="get" selected="selected">GET (URL data)</option>
							  <?php } else { ?>
							  <option value="get">GET (URL data)</option>
							  <?php } ?>
							  <?php if ($config_mijoshop['firewall_rfi'] == 'post') { ?>
							  <option value="post" selected="selected">POST (Form data)</option>
							  <?php } else { ?>
							  <option value="post">POST (Form data)</option>
							  <?php } ?>
							  <?php if ($config_mijoshop['firewall_rfi'] == 'both') { ?>
							  <option value="both" selected="selected">Both</option>
							  <?php } else { ?>
							  <option value="both">Both</option>
							  <?php } ?>
							  </select>
						  </div>
						</div>
						<div class="form-group">
						  <label class="col-sm-2 control-label"><?php echo $entry_mijoshop_firewall_sql; ?></label>
						  <div class="col-sm-10">
							<select name="config_mijoshop[firewall_sql]" class="form-control">
							  <?php if (!isset($config_mijoshop['firewall_sql']) or $config_mijoshop['firewall_sql'] == 'none') { ?>
							  <option value="none" selected="selected">None</option>
							  <?php } else { ?>
							  <option value="none">None</option>
							  <?php } ?>
							  <?php if ($config_mijoshop['firewall_sql'] == 'get') { ?>
							  <option value="get" selected="selected">GET (URL data)</option>
							  <?php } else { ?>
							  <option value="get">GET (URL data)</option>
							  <?php } ?>
							  <?php if ($config_mijoshop['firewall_sql'] == 'post') { ?>
							  <option value="post" selected="selected">POST (Form data)</option>
							  <?php } else { ?>
							  <option value="post">POST (Form data)</option>
							  <?php } ?>
							  <?php if ($config_mijoshop['firewall_sql'] == 'both') { ?>
							  <option value="both" selected="selected">Both</option>
							  <?php } else { ?>
							  <option value="both">Both</option>
							  <?php } ?>
							  </select>
						  </div>
						</div>
						<div class="form-group">
						  <label class="col-sm-2 control-label"><?php echo $entry_mijoshop_firewall_xss; ?></label>
						  <div class="col-sm-10">
							<select name="config_mijoshop[firewall_xss]" class="form-control">
							  <?php if (!isset($config_mijoshop['firewall_xss']) or $config_mijoshop['firewall_xss'] == 'none') { ?>
							  <option value="none" selected="selected">None</option>
							  <?php } else { ?>
							  <option value="none">None</option>
							  <?php } ?>
							  <?php if ($config_mijoshop['firewall_xss'] == 'get') { ?>
							  <option value="get" selected="selected">GET (URL data)</option>
							  <?php } else { ?>
							  <option value="get">GET (URL data)</option>
							  <?php } ?>
							  <?php if ($config_mijoshop['firewall_xss'] == 'post') { ?>
							  <option value="post" selected="selected">POST (Form data)</option>
							  <?php } else { ?>
							  <option value="post">POST (Form data)</option>
							  <?php } ?>
							  <?php if ($config_mijoshop['firewall_xss'] == 'both') { ?>
							  <option value="both" selected="selected">Both</option>
							  <?php } else { ?>
							  <option value="both">Both</option>
							  <?php } ?>
							  </select>
						  </div>
						</div>
	                </fieldset>
                    <fieldset>
	                    <legend>Integration</legend>
						<div class="form-group">
						  <label class="col-sm-2 control-label"><?php echo $entry_mijoshop_trigger_content_plg; ?></label>
						  <div class="col-sm-10">
							<label class="radio-inline">
							  <?php if ($config_mijoshop['trigger_content_plg']) { ?>
							  <input type="radio" name="config_mijoshop[trigger_content_plg]" value="1" checked="checked" />
							  <?php echo $text_yes; ?>
							  <?php } else { ?>
							  <input type="radio" name="config_mijoshop[trigger_content_plg]" value="1" />
							  <?php echo $text_yes; ?>
							  <?php } ?>
							</label>
							<label class="radio-inline">
							  <?php if (!$config_mijoshop['trigger_content_plg']) { ?>
							  <input type="radio" name="config_mijoshop[trigger_content_plg]" value="0" checked="checked" />
							  <?php echo $text_no; ?>
							  <?php } else { ?>
							  <input type="radio" name="config_mijoshop[trigger_content_plg]" value="0" />
							  <?php echo $text_no; ?>
							  <?php } ?>
							</label>
							</div>
						</div>
						<div class="form-group">
						  <label class="col-sm-2 control-label"><?php echo $entry_mijoshop_check_j_block_status; ?></label>
						  <div class="col-sm-10">
							<label class="radio-inline">
							  <?php if ($config_mijoshop['check_j_block_status']) { ?>
							  <input type="radio" name="config_mijoshop[check_j_block_status]" value="1" checked="checked" />
							  <?php echo $text_yes; ?>
							  <?php } else { ?>
							  <input type="radio" name="config_mijoshop[check_j_block_status]" value="1" />
							  <?php echo $text_yes; ?>
							  <?php } ?>
							</label>
							<label class="radio-inline">
							  <?php if (!$config_mijoshop['check_j_block_status']) { ?>
							  <input type="radio" name="config_mijoshop[check_j_block_status]" value="0" checked="checked" />
							  <?php echo $text_no; ?>
							  <?php } else { ?>
							  <input type="radio" name="config_mijoshop[check_j_block_status]" value="0" />
							  <?php echo $text_no; ?>
							  <?php } ?>
							</label>
							</div>
						</div>
						<div class="form-group">
						  <label class="col-sm-2 control-label"><?php echo $entry_mijoshop_comments; ?></label>
						  <div class="col-sm-10">
							<select name="config_mijoshop[comments]" class="form-control">
							  <?php if (!isset($config_mijoshop['comments']) or $config_mijoshop['comments'] == 0) { ?>
							  <option value="0" selected="selected"><?php echo $text_no; ?></option>
							  <?php } else { ?>
							  <option value="0"><?php echo $text_no; ?></option>
							  <?php } ?>
							  <?php if ($config_mijoshop['comments'] == 'jcomments') { ?>
							  <option value="jcomments" selected="selected">JComments</option>
							  <?php } else { ?>
							  <option value="jcomments">JComments</option>
							  <?php } ?>
							  <?php if ($config_mijoshop['comments'] == 'komento') { ?>
							  <option value="komento" selected="selected">Komento</option>
							  <?php } else { ?>
							  <option value="komento">Komento</option>
							  <?php } ?>
							  </select>
						  </div>
						</div>
						<div class="form-group">
						  <label class="col-sm-2 control-label"><?php echo $entry_mijoshop_mijosef_integration; ?></label>
						  <div class="col-sm-10">
							<label class="radio-inline">
							  <?php if ($config_mijoshop['mijosef_integration']) { ?>
							  <input type="radio" name="config_mijoshop[mijosef_integration]" value="1" checked="checked" />
							  <?php echo $text_yes; ?>
							  <?php } else { ?>
							  <input type="radio" name="config_mijoshop[mijosef_integration]" value="1" />
							  <?php echo $text_yes; ?>
							  <?php } ?>
							</label>
							<label class="radio-inline">
							  <?php if (!$config_mijoshop['mijosef_integration']) { ?>
							  <input type="radio" name="config_mijoshop[mijosef_integration]" value="0" checked="checked" />
							  <?php echo $text_no; ?>
							  <?php } else { ?>
							  <input type="radio" name="config_mijoshop[mijosef_integration]" value="0" />
							  <?php echo $text_no; ?>
							  <?php } ?>
							</label>
						  </div>
						</div>
						<?php if (Mijoshop::get('base')->isAcymaillingInstalled()) { ?>
						<div class="form-group">
						  <label class="col-sm-2 control-label"><?php echo $entry_mijoshop_acymailling_register; ?></label>
						  <div class="col-sm-10">
							<?php echo Mijoshop::get('base')->getMailListHtml('config_mijoshop[acymailling_register]', $config_mijoshop['acymailling_register']); ?>
						  </div>
						</div>
						<div class="form-group">
						  <label class="col-sm-2 control-label"><?php echo $entry_mijoshop_acymailling_checkout; ?></label>
						  <div class="col-sm-10">
							<?php echo Mijoshop::get('base')->getMailListHtml('config_mijoshop[acymailling_checkout]', $config_mijoshop['acymailling_checkout']); ?>
						  </div>
						</div>
						<?php } ?>
	                </fieldset>
                    <input type="hidden" name="config_mijoshop[account_sync_done]" value="1">
                    <input type="hidden" name="config_mijoshop[alias_sync_done]" value="<?php echo Mijoshop::get('base')->getConfig()->get('account_sync_done', 0); ?>">
                    <input type="hidden" name="config_mijoshop[wizard]" value="1" />
                </div>
            ]]></add>
        </operation>
        <operation error="skip">
            <search><![CDATA[<li><a href="#tab-server" data-toggle="tab"><?php echo $tab_server; ?></a></li>]]></search>
            <add position="after"><![CDATA[<li><a href="#tab-mijoshop" data-toggle="tab">MijoShop</a></li>]]></add>
        </operation>
    </file>
		
	<file path="admin/controller/catalog/information.php">
        <operation error="skip">
            <search><![CDATA[$data['keyword'] = $information_info['keyword'];]]></search>
            <add position="replace"><![CDATA[$data['keyword'] = MijoShop::get('db')->getRecordAliases($this->request->get['information_id'], 'information'); #mijoshop-start]]></add>
        </operation>
    </file>
	
    <file path="admin/controller/sale/customer.php">
        <operation error="skip">
            <search><![CDATA[index.php?route=]]></search>
            <add position="replace"><![CDATA[index.php?option=com_mijoshop&route=]]></add>
        </operation>
        <operation error="skip">
            <search><![CDATA[if ($customers && $this->validateApprove()) {]]></search>
            <add position="after"><![CDATA[            $this->model_sale_customer->approve($this->request->get['customer_id']);
            foreach ($customers as $customer_id) {
                $this->model_sale_customer->approve($customer_id);
            }
            ]]></add>
        </operation>
        <operation error="skip">
            <search><![CDATA[$data['delete'] = $this->url->link('sale/customer/delete', 'token=' . $this->session->data['token'] . $url, 'SSL');]]></search>
            <add position="after"><![CDATA[        $data['approve'] = $this->url->link('sale/customer/approve', 'token=' . $this->session->data['token'] . $url, 'SSL');]]></add>
        </operation>
        <operation error="skip">
            <search><![CDATA[$data['button_approve'] = $this->language->get('button_approve');]]></search>
            <add position="after"><![CDATA[		$data['button_enable'] = $this->language->get('button_enable');
		$data['button_disable'] = $this->language->get('button_disable');]]></add>
        </operation>
    </file>

    <file path="admin/controller/sale/customer_group.php">
        <operation error="skip">
            <search><![CDATA[$this->response->setOutput($this->load->view('sale/customer_group_form.tpl', $data));]]></search>
            <add position="before"><![CDATA[		#mijoshop-start
		$jgroup_tree =  MijoShop::get('user')->getJoomlaUserGroups();
		$jgroup_id = MijoShop::get('user')->getJGroupIdOfCGroup($this->request->get['customer_group_id']);
		$data['jgroups'] = JHTML::_('select.genericlist', $jgroup_tree, 'jgroup_id', 'size="1"', 'value', 'text', $jgroup_id);
		#mijoshop-finish]]></add>
        </operation>
    </file>
	
	<file path="admin/controller/sale/order.php">    
		<operation error="skip">
            <search><![CDATA[$upload_info = $this->model_tool_upload->getUploadByCode($order_info['custom_field'][$custom_field['custom_field_id']]);]]></search>
            <add position="before"><![CDATA[$this->load->model('tool/upload');]]></add>
        </operation>
		
		<operation error="skip">
            <search><![CDATA[$data['payment_action'] = $this->load->controller('payment/' . $order_info['payment_code'] . '/orderAction', '');]]></search>
            <add position="after"><![CDATA[			$data['openbay'] = $this->user->hasPermission('access','extension/openbay');]]></add>
        </operation>
    </file>

    <file path="admin/controller/report/sale_order.php">
        <operation error="skip">
            <search index="0"><![CDATA[if (isset($this->request->get['page'])) {]]></search>
            <add position="before"><![CDATA[
        #mijoshop-start
        if (isset($this->request->get['filter_payment_code'])) {
            $filter_payment_code = $this->request->get['filter_payment_code'];
        } else {
            $filter_payment_code = '';
        }
		#mijoshop-finish
		]]></add>
        </operation>
        <operation error="skip">
            <search index="1"><![CDATA[if (isset($this->request->get['page'])) {]]></search>
            <add position="before"><![CDATA[
        #mijoshop-start
        if (isset($this->request->get['filter_payment_code'])) {
            $url .= '&filter_payment_code=' . $this->request->get['filter_payment_code'];
        }
		#mijoshop-finish
		]]></add>
        </operation>
        <operation error="skip">
            <search><![CDATA['filter_order_status_id' => $filter_order_status_id,]]></search>
            <add position="after"><![CDATA['filter_payment_code'    => $filter_payment_code,]]></add>
        </operation>
        <operation error="skip">
            <search><![CDATA[$data['text_all_status'] = $this->language->get('text_all_status');]]></search>
            <add position="after"><![CDATA[$data['text_all_payment'] = $this->language->get('text_all_payment');]]></add>
        </operation>
        <operation error="skip">
            <search><![CDATA[$data['entry_status'] = $this->language->get('entry_status');]]></search>
            <add position="after"><![CDATA[$data['entry_payment'] = $this->language->get('entry_payment');]]></add>
        </operation>
        <operation error="skip">
            <search><![CDATA[$data['order_statuses'] = $this->model_localisation_order_status->getOrderStatuses();]]></search>
            <add position="after"><![CDATA[
        #mijoshop-start
        $this->load->model('extension/extension');

        $payment_methods = $this->model_extension_extension->getExtensions(array('filter_type' => 'payment'));

        $data['payment_methods'] = array();

        foreach ($payment_methods as $payment_method) {
            $this->load->language('payment/' . $payment_method['code']);

            $data['payment_methods'][] = array(
                'code'  => $payment_method['code'],
                'title' => $this->language->get('heading_title'),
            );
        }
        #mijoshop-finish
]]></add>
        </operation>
        <operation error="skip">
            <search><![CDATA[$pagination = new Pagination();]]></search>
            <add position="before"><![CDATA[
        if (isset($this->request->get['filter_payment_code'])) {
            $url .= '&filter_payment_code=' . $this->request->get['filter_payment_code'];
        }
]]></add>
        </operation>
        <operation error="skip">
            <search><![CDATA[$data['filter_order_status_id'] = $filter_order_status_id;]]></search>
            <add position="after"><![CDATA[$data['filter_payment_code'] = $filter_payment_code;]]></add>
        </operation>
    </file>

    <file path="admin/controller/user/user_permission.php">
        <operation error="skip">
            <search><![CDATA[$this->response->setOutput($this->load->view('user/user_group_form.tpl', $data));]]></search>
            <add position="before"><![CDATA[		#mijoshop-start
		$jgroup_tree =  MijoShop::get('user')->getJoomlaUserGroups();
		$jgroup_id = MijoShop::get('user')->getJGroupIdOfUGroup($this->request->get['user_group_id']);
		$data['jgroups'] = JHTML::_('select.genericlist', $jgroup_tree, 'jgroup_id', 'size="1"', 'value', 'text', $jgroup_id);
		#mijoshop-finish]]></add>
        </operation>
    </file>

	<file path="admin/controller/marketing/affiliate.php">
        <operation error="log">
            <search><![CDATA[if (!isset($this->request->post['zone_id']) || $this->request->post['zone_id'] == '') {]]></search>
            <add position="replace"><![CDATA[if (!isset($this->request->post['zone_id']) || $this->request->post['zone_id'] == '' || !is_numeric($this->request->post['zone_id'])) { #mijoshop-start]]></add>
        </operation>
    </file>
	
    <file path="admin/model/catalog/information.php">
        <operation error="skip">
            <search><![CDATA[if (isset($data['keyword'])) {]]></search>
            <add position="replace" offset="2"><![CDATA[#mijoshop-start
		MijoShop::get('mijosef')->store($data['mijosef'], $information_id);
		foreach ($data['keyword'] as $language_id => $value) {
		$keyword = empty($value) ? MijoShop::get('router')->generateAlias($data['information_description'][$language_id]['title']) : $value;
			if ($keyword) {
                $this->db->query("INSERT INTO " . DB_PREFIX . "url_alias SET query = 'information_id=" . (int)$information_id . "', keyword = '" . $this->db->escape($keyword) . "', language_id = '" . $language_id . "'");
            }
		}
		#mijoshop-finish]]></add>
        </operation>
		
        <operation error="skip">
            <search><![CDATA[if ($data['keyword']) {]]></search>
            <add position="replace" offset="2"><![CDATA[#mijoshop-start
		MijoShop::get('mijosef')->store($data['mijosef']);
		foreach ($data['keyword'] as $language_id => $value) {
		$keyword = empty($value) ? MijoShop::get('router')->generateAlias($data['information_description'][$language_id]['title']) : $value;
            if ($keyword) {
                $this->db->query("INSERT INTO " . DB_PREFIX . "url_alias SET query = 'information_id=" . (int)$information_id . "', keyword = '" . $this->db->escape($keyword) . "', language_id = '" . $language_id . "'");
            }
        }
		#mijoshop-finish]]></add>
        </operation>
		
        <operation error="skip">
            <search><![CDATA[, (SELECT keyword FROM " . DB_PREFIX . "url_alias WHERE query = 'information_id=" . (int)$information_id . "') AS keyword]]></search>
            <add position="replace"><![CDATA[]]></add>
        </operation>
    </file>

    <file path="admin/model/catalog/manufacturer.php">
        <operation error="skip">
            <search><![CDATA[if (isset($data['keyword'])) {]]></search>
            <add  position="before"><![CDATA[		#mijoshop-start
		MijoShop::get('mijosef')->store($data['mijosef'], $manufacturer_id);
		$data['keyword'] = empty($data['keyword']) ? MijoShop::get('router')->generateAlias($data['name']) : $data['keyword'];
		#mijoshop-finish]]></add>
        </operation>
       
	   <operation error="skip">
            <search><![CDATA[if ($data['keyword']) {]]></search>
            <add  position="before"><![CDATA[		#mijoshop-start        
		MijoShop::get('mijosef')->store($data['mijosef']);
		$data['keyword'] = empty($data['keyword']) ? MijoShop::get('router')->generateAlias($data['name']) : $data['keyword'];
		#mijoshop-finish]]></add>
        </operation>

        <operation error="skip">
            <search><![CDATA[$query = $this->db->query("SELECT DISTINCT *, (SELECT keyword FROM " . DB_PREFIX . "url_alias WHERE query = 'manufacturer_id=" . (int)$manufacturer_id . "') AS keyword FROM " . DB_PREFIX . "manufacturer WHERE manufacturer_id = '" . (int)$manufacturer_id . "'");]]></search>
            <add  position="replace"><![CDATA[$query = $this->db->query("SELECT DISTINCT *, (SELECT keyword FROM " . DB_PREFIX . "url_alias WHERE query = 'manufacturer_id=" . (int)$manufacturer_id . "' LIMIT 1) AS keyword FROM " . DB_PREFIX . "manufacturer WHERE manufacturer_id = '" . (int)$manufacturer_id . "'"); #mijoshop-start]]></add>
        </operation>
    </file>

    <file path="admin/model/extension/extension.php">
        <operation error="skip">
            <search><![CDATA[public function install($type, $code) {]]></search>
            <add  position="before"><![CDATA[
    public function getExtensions($data = array()) {
        if ($data) {
            $sql = "SELECT * FROM " . DB_PREFIX . "extension WHERE extension_id <> 0";
            if (!empty($data['filter_type'])) {
                $sql .= " AND type = '" . $this->db->escape($data['filter_type']) . "'";
            }
            if (isset($data['start']) || isset($data['limit'])) {
                if ($data['start'] < 0) {
                    $data['start'] = 0;
                }
                if ($data['limit'] < 1) {
                    $data['limit'] = 20;
                }
                $sql .= " LIMIT " . (int)$data['start'] . "," . (int)$data['limit'];
            }
            $extension_data = $this->db->query($sql)->rows;
            return $extension_data;
        } else {
            $sql = "SELECT * FROM " . DB_PREFIX . "extension ORDER BY code";
            $extension_data = $this->db->query($sql)->rows;
            return $extension_data;
        }
    }
]]></add>
        </operation>
    </file>

    <file path="admin/model/report/sale.php">
        <operation error="skip">
            <search index="0"><![CDATA[if (!empty($data['filter_date_start'])) {]]></search>
            <add position="before"><![CDATA[		if (!empty($data['filter_payment_code'])) {
            $sql .= " AND o.payment_code = '" . $data['filter_payment_code'] . "'";
        }
]]></add>
        </operation>
        <operation error="skip">
            <search index="1"><![CDATA[if (!empty($data['filter_date_start'])) {]]></search>
            <add position="before"><![CDATA[		if (!empty($data['filter_payment_code'])) {
            $sql .= " AND payment_code = '" . $data['filter_payment_code'] . "'";
        }
]]></add>
        </operation>
    </file>

    <file path="admin/model/report/customer.php">
        <operation error="skip">
            <search><![CDATA[public function getCustomerActivities($data = array()) {]]></search>
            <add position="before"><![CDATA[
    public function getCustomerSearches($data = array())
    {
        $sql = "SELECT cs.customer_id, cs.keyword, cs.category_id, cs.products, cs.ip, cs.date_added, CONCAT(c.firstname, ' ', c.lastname) AS customer FROM " . DB_PREFIX . "customer_search cs LEFT JOIN " . DB_PREFIX . "customer c ON (cs.customer_id = c.customer_id)";
        $implode = array();
        if (!empty($data['filter_date_start'])) {
            $implode[] = "DATE(cs.date_added) >= '" . $this->db->escape($data['filter_date_start']) . "'";
        }
        if (!empty($data['filter_date_end'])) {
            $implode[] = "DATE(cs.date_added) <= '" . $this->db->escape($data['filter_date_end']) . "'";
        }
        if (!empty($data['filter_keyword'])) {
            $implode[] = "cs.keyword LIKE '" . $this->db->escape($data['filter_keyword']) . "%'";
        }
        if (!empty($data['filter_customer'])) {
            $implode[] = "CONCAT(c.firstname, ' ', c.lastname) LIKE '" . $this->db->escape($data['filter_customer']) . "'";
        }
        if (!empty($data['filter_ip'])) {
            $implode[] = "cs.ip LIKE '" . $this->db->escape($data['filter_ip']) . "'";
        }
        if ($implode) {
            $sql .= " WHERE " . implode(" AND ", $implode);
        }
        $sql .= " ORDER BY cs.date_added DESC";
        if (isset($data['start']) || isset($data['limit'])) {
            if ($data['start'] < 0) {
                $data['start'] = 0;
            }
            if ($data['limit'] < 1) {
                $data['limit'] = 20;
            }
            $sql .= " LIMIT " . (int) $data['start'] . "," . (int) $data['limit'];
        }
        $query = $this->db->query($sql);
        return $query->rows;
    }

    public function getTotalCustomerSearches($data = array())
    {
        $sql = "SELECT COUNT(*) AS total FROM `" . DB_PREFIX . "customer_search` cs LEFT JOIN " . DB_PREFIX . "customer c ON (cs.customer_id = c.customer_id)";
        $implode = array();
        if (!empty($data['filter_date_start'])) {
            $implode[] = "DATE(cs.date_added) >= '" . $this->db->escape($data['filter_date_start']) . "'";
        }
        if (!empty($data['filter_date_end'])) {
            $implode[] = "DATE(cs.date_added) <= '" . $this->db->escape($data['filter_date_end']) . "'";
        }
        if (!empty($data['filter_keyword'])) {
            $implode[] = "cs.keyword LIKE '" . $this->db->escape($data['filter_keyword']) . "%'";
        }
        if (!empty($data['filter_customer'])) {
            $implode[] = "CONCAT(c.firstname, ' ', c.lastname) LIKE '" . $this->db->escape($data['filter_customer']) . "'";
        }
        if (!empty($data['filter_ip'])) {
            $implode[] = "cs.ip LIKE '" . $this->db->escape($data['filter_ip']) . "'";
        }
        if ($implode) {
            $sql .= " WHERE " . implode(" AND ", $implode);
        }
        $query = $this->db->query($sql);
        return $query->row['total'];
    }
]]></add>
        </operation>
    </file>

    <file path="admin/model/sale/customer.php">
        <operation error="skip">
            <search index="0"><![CDATA[if (isset($data['address'])) {]]></search>
            <add position="before"><![CDATA[		MijoShop::get('user')->createJUserFromO($data, $customer_id); #mijoshop-start]]></add>
        </operation>
        
		<operation error="skip">
            <search><![CDATA[$this->db->query("INSERT INTO " . DB_PREFIX . "customer SET customer_group_id = '" . (int)$data['customer_group_id'] . "', firstname = '" . $this->db->escape($data['firstname']) . "', lastname = '" . $this->db->escape($data['lastname']) . "', email = '" . $this->db->escape($data['email']) . "', telephone = '" . $this->db->escape($data['telephone']) . "', fax = '" . $this->db->escape($data['fax']) . "', custom_field = '" . $this->db->escape(isset($data['custom_field']) ? serialize($data['custom_field']) : '') . "', newsletter = '" . (int)$data['newsletter'] . "', salt = '" . $this->db->escape($salt = substr(md5(uniqid(rand(), true)), 0, 9)) . "', password = '" . $this->db->escape(sha1($salt . sha1($salt . sha1($data['password'])))) . "', status = '" . (int)$data['status'] . "', approved = '" . (int)$data['approved'] . "', safe = '" . (int)$data['safe'] . "', date_added = NOW()");]]></search>
            <add position="replace"><![CDATA[$this->db->query("INSERT INTO " . DB_PREFIX . "customer SET customer_group_id = '" . (int)$data['customer_group_id'] . "', firstname = '" . $this->db->escape($data['firstname']) . "', lastname = '" . $this->db->escape($data['lastname']) . "', email = '" . $this->db->escape($data['email']) . "', telephone = '" . $this->db->escape($data['telephone']) . "', fax = '" . $this->db->escape($data['fax']) . "', custom_field = '" . $this->db->escape(isset($data['custom_field']) ? serialize($data['custom_field']) : '') . "', newsletter = '" . (int)$data['newsletter'] . "', password = '" . $this->db->escape(Mijoshop::get('user')->encryptPassword($data['password'])) . "', status = '" . (int)$data['status'] . "', approved = '" . (int)$data['approved'] . "', safe = '" . (int)$data['safe'] . "', date_added = NOW()"); #mijoshop-start]]></add>
        </operation>
        
		<operation error="skip">
            <search><![CDATA[$this->db->query("UPDATE " . DB_PREFIX . "customer SET salt = '" . $this->db->escape($salt = substr(md5(uniqid(rand(), true)), 0, 9)) . "', password = '" . $this->db->escape(sha1($salt . sha1($salt . sha1($data['password'])))) . "' WHERE customer_id = '" . (int)$customer_id . "'");]]></search>
            <add position="replace"><![CDATA[$this->db->query("UPDATE " . DB_PREFIX . "customer SET password = '" . $data['password'] . "' WHERE customer_id = '" . (int)$customer_id . "'"); #mijoshop-start]]></add>
        </operation>
        
		<operation error="skip">
            <search><![CDATA[public function editCustomer($customer_id, $data) {]]></search>
            <add position="after"><![CDATA[		$data['password'] = MijoShop::get('user')->updateJUserFromO(MijoShop::get('user')->getJUserIdFromOCustomer($customer_id), $data, $customer_id); #mijoshop-start]]></add>
        </operation>
        
		<operation error="skip">
            <search><![CDATA[public function deleteCustomer($customer_id) {]]></search>
            <add position="after"><![CDATA[		MijoShop::get('user')->deleteJUserFromO($customer_id); #mijoshop-start]]></add>
        </operation>
        
		<operation error="skip">
            <search index="0"><![CDATA[if ($customer_info) {]]></search>
            <add position="after"><![CDATA[            MijoShop::get('user')->approveJUserFromO($customer_id); #mijoshop-start]]></add>
        </operation>
        
		<operation error="skip">
            <search><![CDATA[$message .= $store_url . "\n\n";]]></search>
            <add position="replace"><![CDATA[$message .= str_replace('/administrator', '', $this->url->link('account/login', '', 'SSL')) . "\n\n"; #mijoshop-start]]></add>
        </operation>
    </file>	
	
    <file path="admin/model/sale/customer_group.php">
        <operation error="skip">
            <search><![CDATA[$customer_group_id = $this->db->getLastId();]]></search>
            <add position="after"><![CDATA[        $this->db->query("INSERT INTO " . DB_PREFIX . "jgroup_cgroup_map SET jgroup_id = '" . (int)$data['jgroup_id'] . "', cgroup_id = '" . (int)$customer_group_id . "'"); #mijoshop-start]]></add>
        </operation>
        
		<operation error="skip">
            <search><![CDATA[public function editCustomerGroup($customer_group_id, $data) {]]></search>
            <add position="after"><![CDATA[        $this->db->query("UPDATE " . DB_PREFIX . "jgroup_cgroup_map SET jgroup_id = '" . (int)$data['jgroup_id'] . "' WHERE cgroup_id = '" . (int)$customer_group_id . "'"); #mijoshop-start]]></add>
        </operation>
        
		<operation error="skip">
            <search><![CDATA[public function deleteCustomerGroup($customer_group_id) {]]></search>
            <add position="after"><![CDATA[        $this->db->query("DELETE FROM " . DB_PREFIX . "jgroup_cgroup_map WHERE cgroup_id = '" . (int)$customer_group_id . "'"); #mijoshop-start]]></add>
        </operation>
    </file>	
	
    <file path="admin/model/sale/voucher.php">
        <operation error="skip">
            <search><![CDATA[$data['image'] = HTTP_CATALOG . 'image/' . $voucher_theme_info['image'];]]></search>
            <add position="replace"><![CDATA[$data['image'] = HTTP_IMAGE . $voucher_theme_info['image']; #mijoshop-start]]></add>
        </operation>
    </file>

	<file path="admin/model/user/user.php">
        <operation error="skip">
            <search><![CDATA[$this->db->query("INSERT INTO `" . DB_PREFIX . "user` SET username = '" . $this->db->escape($data['username']) . "', user_group_id = '" . (int)$data['user_group_id'] . "', salt = '" . $this->db->escape($salt = substr(md5(uniqid(rand(), true)), 0, 9)) . "', password = '" . $this->db->escape(sha1($salt . sha1($salt . sha1($data['password'])))) . "', firstname = '" . $this->db->escape($data['firstname']) . "', lastname = '" . $this->db->escape($data['lastname']) . "', email = '" . $this->db->escape($data['email']) . "', image = '" . $this->db->escape($data['image']) . "', status = '" . (int)$data['status'] . "', date_added = NOW()");]]></search>
            <add position="replace"><![CDATA[#mijoshop-start	
		$this->db->query("INSERT INTO `" . DB_PREFIX . "user` SET username = '" . $this->db->escape($data['username']) . "', user_group_id = '" . (int)$data['user_group_id'] . "', salt = '" . $this->db->escape($salt = substr(md5(uniqid(rand(), true)), 0, 9)) . "', password = '" . $this->db->escape(Mijoshop::get('user')->encryptPassword($data['password'])) . "', firstname = '" . $this->db->escape($data['firstname']) . "', lastname = '" . $this->db->escape($data['lastname']) . "', email = '" . $this->db->escape($data['email']) . "', image = '" . $this->db->escape($data['image']) . "', status = '" . (int)$data['status'] . "', date_added = NOW()");        $user_id = $this->db->getLastId();
        MijoShop::get('user')->createJUserFromO($data, $user_id);
		#mijoshop-finish]]></add>
        </operation>
        
		<operation error="skip">
            <search><![CDATA[if ($data['password']) {]]></search>
            <add position="before"><![CDATA[        MijoShop::get('user')->updateJUserFromO(MijoShop::get('user')->getJUserIdFromOUser($user_id, $data['username'], $data['email']), $data, $user_id); #mijoshop-start]]></add>
        </operation>
        
		<operation error="skip">
            <search><![CDATA[public function deleteUser($user_id) {]]></search>
            <add position="after"><![CDATA[        MijoShop::get('user')->deleteJUserFromO($user_id, true); #mijoshop-start]]></add>
        </operation>
        
		<operation error="skip">
            <search><![CDATA[$this->db->query("UPDATE `" . DB_PREFIX . "user` SET salt = '" . $this->db->escape($salt = substr(md5(uniqid(rand(), true)), 0, 9)) . "', password = '" . $this->db->escape(sha1($salt . sha1($salt . sha1($data['password'])))) . "' WHERE user_id = '" . (int)$user_id . "'");]]></search>
            <add position="replace"><![CDATA[$this->db->query("UPDATE `" . DB_PREFIX . "user` SET password = '" . $this->db->escape(Mijoshop::get('user')->encryptPassword($data['password'])) . "' WHERE user_id = '" . (int)$user_id . "'"); #mijoshop-start]]></add>
        </operation>
        
		<operation error="skip">
            <search><![CDATA[$this->db->query("UPDATE `" . DB_PREFIX . "user` SET salt = '" . $this->db->escape($salt = substr(md5(uniqid(rand(), true)), 0, 9)) . "', password = '" . $this->db->escape(sha1($salt . sha1($salt . sha1($password)))) . "', code = '' WHERE user_id = '" . (int)$user_id . "'");]]></search>
            <add position="replace"><![CDATA[$this->db->query("UPDATE `" . DB_PREFIX . "user` SET password = '" . $this->db->escape(Mijoshop::get('user')->encryptPassword($password)) . "', code = '' WHERE user_id = '" . (int)$user_id . "'"); #mijoshop-start]]></add>
        </operation>
    </file>

    <file path="admin/model/user/user_group.php">
        <operation error="skip">
            <search><![CDATA[$this->db->query("INSERT INTO " . DB_PREFIX . "user_group SET name = '" . $this->db->escape($data['name']) . "', permission = '" . (isset($data['permission']) ? $this->db->escape(serialize($data['permission'])) : '') . "'");]]></search>
            <add position="after"><![CDATA[		#mijoshop-start
        $user_group_id = $this->db->getLastId();
        $this->db->query("INSERT INTO " . DB_PREFIX . "jgroup_ugroup_map SET jgroup_id = '" . (int)$data['jgroup_id'] . "', ugroup_id = '" . (int)$user_group_id . "'");
		#mijoshop-finish]]></add>
        </operation>
        
		<operation error="skip">
            <search><![CDATA[public function editUserGroup($user_group_id, $data) {]]></search>
            <add position="after"><![CDATA[        $this->db->query("UPDATE " . DB_PREFIX . "jgroup_ugroup_map SET jgroup_id = '" . (int)$data['jgroup_id'] . "' WHERE ugroup_id = '" . (int)$user_group_id . "'"); #mijoshop-start]]></add>
        </operation>
        
		<operation error="skip">
            <search><![CDATA[public function deleteUserGroup($user_group_id) {]]></search>
            <add position="after"><![CDATA[        $this->db->query("DELETE FROM " . DB_PREFIX . "jgroup_ugroup_map WHERE ugroup_id = '" . (int)$user_group_id . "'"); #mijoshop-start]]></add>
        </operation>
    </file>
	
	<file path="admin/view/template/catalog/information_form.tpl">
        <operation error="skip">
            <search index="3"><![CDATA[<div class="form-group">]]></search>
            <add position="replace" offset="8"><![CDATA[]]></add>
        </operation>
		
		<operation error="skip">
            <search index="2"><![CDATA[<div class="form-group required">]]></search>
            <add position="replace"><![CDATA[<div class="form-group">]]></add>
        </operation>
        
		<operation error="skip">
            <search><![CDATA[<label class="col-sm-2 control-label" for="input-description"><?php echo $entry_description; ?></label>]]></search>
            <add position="before" offset="1"><![CDATA[				<div class="form-group">
				<label class="col-sm-2 control-label" for="input-alias"><?php echo JText::_('COM_MIJOSHOP_ALIAS'); ?></label>
				<div class="col-sm-10">
					<input type="text" class="form-control" placeholder="<?php echo JText::_('COM_MIJOSHOP_ALIAS'); ?>" name="keyword[<?php echo $language['language_id']; ?>]" id="input-alias" value="<?php echo isset($keyword[$language['language_id']]) ? $keyword[$language['language_id']] : ''; ?>" />
				</div>
				</div>]]></add>
        </operation>
        
		<operation error="skip">
            <search><![CDATA[<li><a href="#tab-design" data-toggle="tab"><?php echo $tab_design; ?></a></li>]]></search>
            <add position="after"><![CDATA[            <?php if (MijoShop::get('base')->isMijosefInstalled()) { ?><li><a href="#tab-mijosef" data-toggle="tab">MijoSEF</a></li><?php } ?>]]></add>
        </operation>
        
		<operation error="skip">
            <search><![CDATA[<div class="tab-pane" id="tab-design">]]></search>
            <add position="before"><![CDATA[
        <?php if (MijoShop::get('base')->isMijosefInstalled()) { ?>
		<div class="tab-pane" id="tab-mijosef">
		  <ul class="nav nav-tabs" id="languagessef">
			<?php foreach ($languages as $language) { ?>
              <li><a href="#languagesef<?php echo $language['language_id']; ?>" data-toggle="tab"><img src="view/image/flags/<?php echo $language['image']; ?>" title="<?php echo $language['name']; ?>" /> <?php echo $language['name']; ?></a></li>
			<?php } ?>
		  </ul>
		  <BR />
            <?php foreach ($languages as $language) { ?>
            <div class="tab-pane" id="languagesef<?php echo $language['language_id']; ?>">
			  <div class="form-group required">
				<label class="col-sm-2 control-label" for="input-sef-url">SEF URL</label>
				<div class="col-sm-10">
					<input type="text" name="mijosef[<?php echo $language['language_id']; ?>][url_sef]" class="form-control" placeholder="SEF Url" value="<?php echo MijoShop::get('mijosef')->get('url_sef', 'information', JRequest::getInt('information_id', 0, 'get'), $language['language_id']); ?>" />
				</div>
			  </div>
			  <div class="form-group">
				<label class="col-sm-2 control-label" for="input-sef-url">Meta Title</label>
				<div class="col-sm-10">
					<input type="text" name="mijosef[<?php echo $language['language_id']; ?>][title]" class="form-control" placeholder="Meta Title" value="<?php echo MijoShop::get('mijosef')->get('title', 'information', JRequest::getInt('information_id', 0, 'get'), $language['language_id']); ?>" />
				</div>
			  </div>
			  <div class="form-group">
				<label class="col-sm-2 control-label" for="input-sef-url">Meta Description</label>
				<div class="col-sm-10">
					<textarea class="text_area" name="mijosef[<?php echo $language['language_id']; ?>][description]" cols="57" rows="5" placeholder="Meta Description"><?php echo MijoShop::get('mijosef')->get('description', 'information', JRequest::getInt('information_id', 0, 'get'), $language['language_id']); ?></textarea>
				</div>
			  </div>
			  <div class="form-group">
				<label class="col-sm-2 control-label" for="input-sef-url">Meta Keywords</label>
				<div class="col-sm-10">
					<textarea class="text_area" name="mijosef[<?php echo $language['language_id']; ?>][keywords]" cols="57" rows="5" placeholder="Meta Keywords"><?php echo MijoShop::get('mijosef')->get('keywords', 'information', JRequest::getInt('information_id', 0, 'get'), $language['language_id']); ?></textarea>
				</div>
			  </div>
			  <div class="form-group">
				<label class="col-sm-2 control-label" for="input-sef-url">Meta Language</label>
				<div class="col-sm-10">
					<input type="text" name="mijosef[<?php echo $language['language_id']; ?>][lang]" class="form-control" placeholder="Meta Language" value="<?php echo MijoShop::get('mijosef')->get('lang', 'information', JRequest::getInt('information_id', 0, 'get'), $language['language_id']); ?>" />
				</div>
			  </div>
			  <div class="form-group">
				<label class="col-sm-2 control-label" for="input-sef-url">Meta Robots</label>
				<div class="col-sm-10">
					<input type="text" name="mijosef[<?php echo $language['language_id']; ?>][robots]" class="form-control" placeholder="Meta Robots" value="<?php echo MijoShop::get('mijosef')->get('robots', 'information', JRequest::getInt('information_id', 0, 'get'), $language['language_id']); ?>" />
				</div>
			  </div>
			  <div class="form-group">
				<label class="col-sm-2 control-label" for="input-sef-url">Meta Googlebot</label>
				<div class="col-sm-10">
					<input type="text" name="mijosef[<?php echo $language['language_id']; ?>][googlebot]" class="form-control" placeholder="Meta Googlebot" value="<?php echo MijoShop::get('mijosef')->get('googlebot', 'information', JRequest::getInt('information_id', 0, 'get'), $language['language_id']); ?>" />
				</div>
			  </div>
			  <div class="form-group">
				<label class="col-sm-2 control-label" for="input-sef-url">Meta Canonical URL</label>
				<div class="col-sm-10">
					<input type="text" name="mijosef[<?php echo $language['language_id']; ?>][canonical]" class="form-control" placeholder="Meta Canonical URL" value="<?php echo MijoShop::get('mijosef')->get('canonical', 'information', JRequest::getInt('information_id', 0, 'get'), $language['language_id']); ?>" />
				</div>
			  </div>
                <input type="hidden" name="mijosef[<?php echo $language['language_id']; ?>][url_id]" value="<?php echo MijoShop::get('mijosef')->get('url_id', 'information', JRequest::getInt('information_id', 0, 'get'), $language['language_id']); ?>" />
                <input type="hidden" name="mijosef[<?php echo $language['language_id']; ?>][meta_id]" value="<?php echo MijoShop::get('mijosef')->get('meta_id', 'information', JRequest::getInt('information_id', 0, 'get'), $language['language_id']); ?>" />
                <input type="hidden" name="mijosef[<?php echo $language['language_id']; ?>][route_var]" value="route=information/information" />
                <input type="hidden" name="mijosef[<?php echo $language['language_id']; ?>][route_id]" value="information_id=<?php echo JRequest::getInt('information_id', 0, 'get'); ?>" />
            </div>
            <?php } ?>
        </div>
        <?php } ?>]]></add>
        </operation>
        
		<operation error="skip">
            <search><![CDATA[$('#language a:first').tab('show');]]></search>
            <add position="after"><![CDATA[
$('#languagessef a:first').tab('show');
        ]]></add>
        </operation>
    </file>

    <file path="admin/view/template/catalog/category_form.tpl">
        <operation error="skip">
            <search><![CDATA[<label class="col-sm-2 control-label" for="input-keyword"><span data-toggle="tooltip" title="<?php echo $help_keyword; ?>"><?php echo $entry_keyword; ?></span></label>]]></search>
            <add position="replace" offset="6"><![CDATA[]]></add>
        </operation>
		
		<operation error="skip">
            <search index="1"><![CDATA[<div class="form-group required">]]></search>
            <add position="replace"><![CDATA[<div class="form-group">]]></add>
        </operation> 
		
		<operation error="skip">
            <search><![CDATA[<label class="col-sm-2 control-label" for="input-description<?php echo $language['language_id']; ?>"><?php echo $entry_description; ?></label>]]></search>
            <add position="before" offset="1"><![CDATA[				<div class="form-group">
				<label class="col-sm-2 control-label" for="input-alias"><?php echo JText::_('COM_MIJOSHOP_ALIAS'); ?></label>
				<div class="col-sm-10">
					<input type="text" class="form-control" placeholder="<?php echo JText::_('COM_MIJOSHOP_ALIAS'); ?>" name="keyword[<?php echo $language['language_id']; ?>]" id="input-alias" value="<?php echo isset($keyword[$language['language_id']]) ? $keyword[$language['language_id']] : ''; ?>" />
				</div>
				</div>]]></add>
        </operation>
        
		<operation error="skip">
            <search><![CDATA[<li><a href="#tab-design" data-toggle="tab"><?php echo $tab_design; ?></a></li>]]></search>
            <add position="after"><![CDATA[            <?php if (MijoShop::get('base')->isMijosefInstalled()) { ?><li><a href="#tab-mijosef" data-toggle="tab">MijoSEF</a></li><?php } ?>]]></add>
        </operation>
        
		<operation error="skip">
            <search><![CDATA[<div class="tab-pane" id="tab-design">]]></search>
            <add position="before"><![CDATA[
        <?php if (MijoShop::get('base')->isMijosefInstalled()) { ?>
		<div class="tab-pane" id="tab-mijosef">
		  <ul class="nav nav-tabs" id="languagessef">
			<?php foreach ($languages as $language) { ?>
              <li><a href="#languagesef<?php echo $language['language_id']; ?>" data-toggle="tab"><img src="view/image/flags/<?php echo $language['image']; ?>" title="<?php echo $language['name']; ?>" /> <?php echo $language['name']; ?></a></li>
			<?php } ?>
		  </ul>
		  <BR />
            <?php foreach ($languages as $language) { ?>
            <div class="tab-pane" id="languagesef<?php echo $language['language_id']; ?>">
			  <div class="form-group required">
				<label class="col-sm-2 control-label" for="input-sef-url">SEF URL</label>
				<div class="col-sm-10">
					<input type="text" name="mijosef[<?php echo $language['language_id']; ?>][url_sef]" class="form-control" placeholder="SEF Url" value="<?php echo MijoShop::get('mijosef')->get('url_sef', 'category', JRequest::getInt('category_id', 0, 'get'), $language['language_id']); ?>" />
				</div>
			  </div>
			  <div class="form-group">
				<label class="col-sm-2 control-label" for="input-sef-url">Meta Title</label>
				<div class="col-sm-10">
					<input type="text" name="mijosef[<?php echo $language['language_id']; ?>][title]" class="form-control" placeholder="Meta Title" value="<?php echo MijoShop::get('mijosef')->get('title', 'category', JRequest::getInt('category_id', 0, 'get'), $language['language_id']); ?>" />
				</div>
			  </div>
			  <div class="form-group">
				<label class="col-sm-2 control-label" for="input-sef-url">Meta Description</label>
				<div class="col-sm-10">
					<textarea class="text_area" name="mijosef[<?php echo $language['language_id']; ?>][description]" cols="57" rows="5" placeholder="Meta Description"><?php echo MijoShop::get('mijosef')->get('description', 'category', JRequest::getInt('category_id', 0, 'get'), $language['language_id']); ?></textarea>
				</div>
			  </div>
			  <div class="form-group">
				<label class="col-sm-2 control-label" for="input-sef-url">Meta Keywords</label>
				<div class="col-sm-10">
					<textarea class="text_area" name="mijosef[<?php echo $language['language_id']; ?>][keywords]" cols="57" rows="5" placeholder="Meta Keywords"><?php echo MijoShop::get('mijosef')->get('keywords', 'category', JRequest::getInt('category_id', 0, 'get'), $language['language_id']); ?></textarea>
				</div>
			  </div>
			  <div class="form-group">
				<label class="col-sm-2 control-label" for="input-sef-url">Meta Language</label>
				<div class="col-sm-10">
					<input type="text" name="mijosef[<?php echo $language['language_id']; ?>][lang]" class="form-control" placeholder="Meta Language" value="<?php echo MijoShop::get('mijosef')->get('lang', 'category', JRequest::getInt('category_id', 0, 'get'), $language['language_id']); ?>" />
				</div>
			  </div>
			  <div class="form-group">
				<label class="col-sm-2 control-label" for="input-sef-url">Meta Robots</label>
				<div class="col-sm-10">
					<input type="text" name="mijosef[<?php echo $language['language_id']; ?>][robots]" class="form-control" placeholder="Meta Robots" value="<?php echo MijoShop::get('mijosef')->get('robots', 'category', JRequest::getInt('category_id', 0, 'get'), $language['language_id']); ?>" />
				</div>
			  </div>
			  <div class="form-group">
				<label class="col-sm-2 control-label" for="input-sef-url">Meta Googlebot</label>
				<div class="col-sm-10">
					<input type="text" name="mijosef[<?php echo $language['language_id']; ?>][googlebot]" class="form-control" placeholder="Meta Googlebot" value="<?php echo MijoShop::get('mijosef')->get('googlebot', 'category', JRequest::getInt('category_id', 0, 'get'), $language['language_id']); ?>" />
				</div>
			  </div>
			  <div class="form-group">
				<label class="col-sm-2 control-label" for="input-sef-url">Meta Canonical URL</label>
				<div class="col-sm-10">
					<input type="text" name="mijosef[<?php echo $language['language_id']; ?>][canonical]" class="form-control" placeholder="Meta Canonical URL" value="<?php echo MijoShop::get('mijosef')->get('canonical', 'category', JRequest::getInt('category_id', 0, 'get'), $language['language_id']); ?>" />
				</div>
			  </div>
                <input type="hidden" name="mijosef[<?php echo $language['language_id']; ?>][url_id]" value="<?php echo MijoShop::get('mijosef')->get('url_id', 'category', JRequest::getInt('category_id', 0, 'get'), $language['language_id']); ?>" />
                <input type="hidden" name="mijosef[<?php echo $language['language_id']; ?>][meta_id]" value="<?php echo MijoShop::get('mijosef')->get('meta_id', 'category', JRequest::getInt('category_id', 0, 'get'), $language['language_id']); ?>" />
                <input type="hidden" name="mijosef[<?php echo $language['language_id']; ?>][route_var]" value="route=product/category" />
                <input type="hidden" name="mijosef[<?php echo $language['language_id']; ?>][route_id]" value="path=<?php echo JRequest::getInt('category_id', 0, 'get'); ?>" />
            </div>
            <?php } ?>
        </div>
        <?php } ?>]]></add>
        </operation>
        
		<operation error="skip">
            <search><![CDATA[$('#language a:first').tab('show');]]></search>
            <add position="after"><![CDATA[
$('#languagessef a:first').tab('show');
        ]]></add>
        </operation>
    </file>

	<file path="admin/view/template/catalog/product_form.tpl">
        <operation error="skip">
            <search><![CDATA[index.php?route=]]></search>
            <add position="replace"><![CDATA[index.php?option=com_mijoshop&route=]]></add>
        </operation>
        
		<operation error="skip">
            <search><![CDATA[name="option]]></search>
            <add position="replace"><![CDATA[name="option_oc]]></add>
        </operation>
        
		<operation error="skip">
            <search><![CDATA[name=\'option\']]></search>
            <add position="replace"><![CDATA[name=\'option_oc\']]></add>
        </operation>
        
		<operation error="skip">
            <search><![CDATA[<label class="col-sm-2 control-label" for="input-keyword"><span data-toggle="tooltip" title="<?php echo $help_keyword; ?>"><?php echo $entry_keyword; ?></span></label>]]></search>
            <add position="replace" offset="6"><![CDATA[]]></add>
        </operation>
		
		<operation error="skip">
            <search index="1"><![CDATA[<div class="form-group required">]]></search>
            <add position="replace"><![CDATA[<div class="form-group">]]></add>
        </operation>
        
		<operation error="skip">
            <search><![CDATA[<label class="col-sm-2 control-label" for="input-description<?php echo $language['language_id']; ?>"><?php echo $entry_description; ?></label>]]></search>
            <add position="before" offset="1"><![CDATA[				<div class="form-group">
				<label class="col-sm-2 control-label" for="input-alias"><?php echo JText::_('COM_MIJOSHOP_ALIAS'); ?></label>
				<div class="col-sm-10">
					<input type="text" class="form-control" placeholder="<?php echo JText::_('COM_MIJOSHOP_ALIAS'); ?>" name="keyword[<?php echo $language['language_id']; ?>]" id="input-alias" value="<?php echo isset($keyword[$language['language_id']]) ? $keyword[$language['language_id']] : ''; ?>" />
				</div>
				</div>]]></add>
        </operation>
        
		<operation error="skip">
            <search><![CDATA[<li><a href="#tab-design" data-toggle="tab"><?php echo $tab_design; ?></a></li>]]></search>
            <add position="after"><![CDATA[            <?php if (MijoShop::get('base')->isMijosefInstalled()) { ?><li><a href="#tab-mijosef" data-toggle="tab">MijoSEF</a></li><?php } ?>]]></add>
        </operation>
        
		<operation error="skip">
            <search><![CDATA[<div class="tab-pane" id="tab-design">]]></search>
            <add position="before"><![CDATA[
        <?php if (MijoShop::get('base')->isMijosefInstalled()) { ?>
		<div class="tab-pane" id="tab-mijosef">
		  <ul class="nav nav-tabs" id="languagessef">
			<?php foreach ($languages as $language) { ?>
              <li><a href="#languagesef<?php echo $language['language_id']; ?>" data-toggle="tab"><img src="view/image/flags/<?php echo $language['image']; ?>" title="<?php echo $language['name']; ?>" /> <?php echo $language['name']; ?></a></li>
			<?php } ?>
		  </ul>
		  <div class="tab-content">
            <?php foreach ($languages as $language) { ?>
            <div class="tab-pane" id="languagesef<?php echo $language['language_id']; ?>">
			  <div class="form-group required">
				<label class="col-sm-2 control-label" for="input-mijosef-sef-url">SEF URL</label>
				<div class="col-sm-10">
					<input type="text" name="mijosef[<?php echo $language['language_id']; ?>][url_sef]" id="input-mijosef-sef-url" class="form-control" placeholder="SEF Url" value="<?php echo MijoShop::get('mijosef')->get('url_sef', 'product', JRequest::getInt('product_id', 0, 'get'), $language['language_id']); ?>" />
				</div>
			  </div>
			  <div class="form-group">
				<label class="col-sm-2 control-label" for="input-mijosef-meta-title">Meta Title</label>
				<div class="col-sm-10">
					<input type="text" name="mijosef[<?php echo $language['language_id']; ?>][title]" id="input-mijosef-meta-title" class="form-control" placeholder="Meta Title" value="<?php echo MijoShop::get('mijosef')->get('title', 'product', JRequest::getInt('product_id', 0, 'get'), $language['language_id']); ?>" />
				</div>
			  </div>
			  <div class="form-group">
				<label class="col-sm-2 control-label" for="textarea-mijosef-meta-description">Meta Description</label>
				<div class="col-sm-10">
					<textarea class="text_area" name="mijosef[<?php echo $language['language_id']; ?>][description]" id="textarea-mijosef-meta-description" cols="57" rows="5" placeholder="Meta Description"><?php echo MijoShop::get('mijosef')->get('description', 'product', JRequest::getInt('product_id', 0, 'get'), $language['language_id']); ?></textarea>
				</div>
			  </div>
			  <div class="form-group">
				<label class="col-sm-2 control-label" for="textarea-mijosef-meta-keywords">Meta Keywords</label>
				<div class="col-sm-10">
					<textarea class="text_area" name="mijosef[<?php echo $language['language_id']; ?>][keywords]" id="textarea-mijosef-meta-keywords" cols="57" rows="5" placeholder="Meta Keywords"><?php echo MijoShop::get('mijosef')->get('keywords', 'product', JRequest::getInt('product_id', 0, 'get'), $language['language_id']); ?></textarea>
				</div>
			  </div>
			  <div class="form-group">
				<label class="col-sm-2 control-label" for="input-mijosef-meta-language">Meta Language</label>
				<div class="col-sm-10">
					<input type="text" name="mijosef[<?php echo $language['language_id']; ?>][lang]" id="input-mijosef-meta-language" class="form-control" placeholder="Meta Language" value="<?php echo MijoShop::get('mijosef')->get('lang', 'product', JRequest::getInt('product_id', 0, 'get'), $language['language_id']); ?>" />
				</div>
			  </div>
			  <div class="form-group">
				<label class="col-sm-2 control-label" for="input-mijosef-meta-robots">Meta Robots</label>
				<div class="col-sm-10">
					<input type="text" name="mijosef[<?php echo $language['language_id']; ?>][robots]" id="input-mijosef-meta-robots" class="form-control" placeholder="Meta Robots" value="<?php echo MijoShop::get('mijosef')->get('robots', 'product', JRequest::getInt('product_id', 0, 'get'), $language['language_id']); ?>" />
				</div>
			  </div>
			  <div class="form-group">
				<label class="col-sm-2 control-label" for="input-mijosef-meta-googlebot">Meta Googlebot</label>
				<div class="col-sm-10">
					<input type="text" name="mijosef[<?php echo $language['language_id']; ?>][googlebot]" id="input-mijosef-meta-googlebot" class="form-control" placeholder="Meta Googlebot" value="<?php echo MijoShop::get('mijosef')->get('googlebot', 'product', JRequest::getInt('product_id', 0, 'get'), $language['language_id']); ?>" />
				</div>
			  </div>
			  <div class="form-group">
				<label class="col-sm-2 control-label" for="input-mijosef-meta-canonical-url">Meta Canonical URL</label>
				<div class="col-sm-10">
					<input type="text" name="mijosef[<?php echo $language['language_id']; ?>][canonical]" id="input-mijosef-meta-canonical-url" class="form-control" placeholder="Meta Canonical URL" value="<?php echo MijoShop::get('mijosef')->get('canonical', 'product', JRequest::getInt('product_id', 0, 'get'), $language['language_id']); ?>" />
				</div>
			  </div>
                <input type="hidden" name="mijosef[<?php echo $language['language_id']; ?>][url_id]" value="<?php echo MijoShop::get('mijosef')->get('url_id', 'product', JRequest::getInt('product_id', 0, 'get'), $language['language_id']); ?>" />
                <input type="hidden" name="mijosef[<?php echo $language['language_id']; ?>][meta_id]" value="<?php echo MijoShop::get('mijosef')->get('meta_id', 'product', JRequest::getInt('product_id', 0, 'get'), $language['language_id']); ?>" />
                <input type="hidden" name="mijosef[<?php echo $language['language_id']; ?>][route_var]" value="route=product/product" />
                <input type="hidden" name="mijosef[<?php echo $language['language_id']; ?>][route_id]" value="product_id=<?php echo JRequest::getInt('product_id', 0, 'get'); ?>" />
            </div>
            <?php } ?>
		  </div>  
        </div>
        <?php } ?>]]></add>
        </operation>
        
		<operation error="skip">
            <search><![CDATA[$('#language a:first').tab('show');]]></search>
            <add position="after"><![CDATA[
$('#languagessef a:first').tab('show');
        ]]></add>
        </operation>
    </file>	

    <file path="admin/view/template/catalog/manufacturer_form.tpl">
        <operation error="skip">
            <search index="1"><![CDATA[<div class="form-group">]]></search>
            <add position="replace" offset="8"><![CDATA[]]></add>
        </operation>
        
		<operation error="skip">
            <search><![CDATA[<label class="col-sm-2 control-label"><?php echo $entry_store; ?></label>]]></search>
            <add position="before" offset="1"><![CDATA[				  
				<div class="form-group">
				<label class="col-sm-2 control-label" for="input-alias"><?php echo JText::_('COM_MIJOSHOP_ALIAS'); ?></label>
				<div class="col-sm-10">
					<input type="text" class="form-control" placeholder="<?php echo JText::_('COM_MIJOSHOP_ALIAS'); ?>" name="keyword" id="input-alias" value="<?php echo $keyword; ?>" />
                </div>
				</div>]]></add>
        </operation>
        
		<operation error="skip">
            <search><![CDATA[<form action="<?php echo $action; ?>" method="post" enctype="multipart/form-data" id="form-manufacturer" class="form-horizontal">]]></search>
            <add position="after"><![CDATA[		          
		  <ul class="nav nav-tabs" id="language">
            <li class="active"><a href="#tab-general" data-toggle="tab">General</a></li>
            <?php if (MijoShop::get('base')->isMijosefInstalled()) { ?><li><a href="#tab-mijosef" data-toggle="tab">MijoSEF</a></li><?php } ?>
		  </ul>
		<div class="tab-content">
		  <div class="tab-pane active" id="tab-general">
		  <br />
		  ]]></add>
        </operation>
        
		<operation error="skip">
            <search><![CDATA[</form>]]></search>
            <add position="before"><![CDATA[
		</div>	
      <?php if (MijoShop::get('base')->isMijosefInstalled()) { ?>
	  <div class="tab-pane" id="tab-mijosef">
	  <br />
		  <div class="form-group required">
			<label class="col-sm-2 control-label" for="input-sef-url">SEF URL</label>
			<div class="col-sm-10">
				<input type="text" name="mijosef[0][url_sef]" id="input-sef-url" class="form-control" placeholder="SEF Url" value="<?php echo MijoShop::get('mijosef')->get('url_sef', 'manufacturer', JRequest::getInt('manufacturer_id', 0, 'get'), 0); ?>" />
			</div>
		  </div>
		  <div class="form-group">
			<label class="col-sm-2 control-label" for="input-sef-url">Meta Title</label>
			<div class="col-sm-10">
				<input type="text" name="mijosef[0][title]" class="form-control" placeholder="Meta Title" value="<?php echo MijoShop::get('mijosef')->get('title', 'manufacturer', JRequest::getInt('manufacturer_id', 0, 'get'), 0); ?>" />
			</div>
		  </div>
		  <div class="form-group">
			<label class="col-sm-2 control-label" for="input-sef-url">Meta Description</label>
			<div class="col-sm-10">
				<textarea class="text_area" name="mijosef[0][description]" cols="57" rows="5" placeholder="Meta Description"><?php echo MijoShop::get('mijosef')->get('description', 'manufacturer', JRequest::getInt('manufacturer_id', 0, 'get'), 0); ?></textarea>
			</div>
		  </div>
		  <div class="form-group">
			<label class="col-sm-2 control-label" for="input-sef-url">Meta Keywords</label>
			<div class="col-sm-10">
				<textarea class="text_area" name="mijosef[0][keywords]" cols="57" rows="5" placeholder="Meta Keywords"><?php echo MijoShop::get('mijosef')->get('keywords', 'manufacturer', JRequest::getInt('manufacturer_id', 0, 'get'), 0); ?></textarea>
			</div>
		  </div>
		  <div class="form-group">
			<label class="col-sm-2 control-label" for="input-sef-url">Meta Language</label>
			<div class="col-sm-10">
				<input type="text" name="mijosef[0][lang]" class="form-control" placeholder="Meta Language" value="<?php echo MijoShop::get('mijosef')->get('lang', 'manufacturer', JRequest::getInt('manufacturer_id', 0, 'get'), 0); ?>" />
			</div>
		  </div>
		  <div class="form-group">
			<label class="col-sm-2 control-label" for="input-sef-url">Meta Robots</label>
			<div class="col-sm-10">
				<input type="text" name="mijosef[0][robots]" class="form-control" placeholder="Meta Robots" value="<?php echo MijoShop::get('mijosef')->get('robots', 'manufacturer', JRequest::getInt('manufacturer_id', 0, 'get'), 0); ?>" />
			</div>
		  </div>
		  <div class="form-group">
			<label class="col-sm-2 control-label" for="input-sef-url">Meta Googlebot</label>
			<div class="col-sm-10">
				<input type="text" name="mijosef[0][googlebot]" class="form-control" placeholder="Meta Googlebot" value="<?php echo MijoShop::get('mijosef')->get('googlebot', 'manufacturer', JRequest::getInt('manufacturer_id', 0, 'get'), 0); ?>" />
			</div>
		  </div>
		  <div class="form-group">
			<label class="col-sm-2 control-label" for="input-sef-url">Meta Canonical URL</label>
			<div class="col-sm-10">
				<input type="text" name="mijosef[0][canonical]" class="form-control" placeholder="Meta Canonical URL" value="<?php echo MijoShop::get('mijosef')->get('canonical', 'manufacturer', JRequest::getInt('manufacturer_id', 0, 'get'), 0); ?>" />
			</div>
		  </div>
            <input type="hidden" name="mijosef[0][url_id]" value="<?php echo MijoShop::get('mijosef')->get('url_id', 'manufacturer', JRequest::getInt('manufacturer_id', 0, 'get'), 0); ?>" />
            <input type="hidden" name="mijosef[0][meta_id]" value="<?php echo MijoShop::get('mijosef')->get('meta_id', 'manufacturer', JRequest::getInt('manufacturer_id', 0, 'get'), 0); ?>" />
            <input type="hidden" name="mijosef[0][route_var]" value="route=product/manufacturer/info" />
            <input type="hidden" name="mijosef[0][route_id]" value="manufacturer_id=<?php echo JRequest::getInt('manufacturer_id', 0, 'get'); ?>" />
        </div>
        <?php } ?>
	</div>	
		]]></add>
        </operation>
    </file>	
		
	<file path="admin/view/template/localisation/order_status_list.tpl">
        <operation error="skip">
            <search><![CDATA[<td class="text-right"><?php echo $column_action; ?></td>]]></search>
            <add position="before"><![CDATA[				  <td class="text-center">ID</td>]]></add>
        </operation>
        
		<operation error="skip">
            <search><![CDATA[<td class="text-left"><?php echo $order_status['name']; ?></td>]]></search>
            <add position="after"><![CDATA[				  <td class="center"><?php echo $order_status['order_status_id']; ?></td>]]></add>
        </operation>
        
		<operation error="skip">
            <search><![CDATA[<td class="text-center" colspan="3"><?php echo $text_no_results; ?></td>]]></search>
            <add position="replace"><![CDATA[<td class="text-center" colspan="4"><?php echo $text_no_results; ?></td>]]></add>
        </operation>
    </file>	

	<file path="admin/view/template/marketing/contact.tpl">    
		<operation error="skip">
            <search><![CDATA[onclick="send(]]></search>
            <add position="replace"><![CDATA[onclick="sendEmail(]]></add>
        </operation>
        
		<operation error="skip">
            <search><![CDATA[function send(url) {]]></search>
            <add position="replace"><![CDATA[function sendEmail(url) {
    <?php echo MijoShop::get('base')->editor()->save("message"); ?>
    ]]></add>
        </operation>
        
		<operation error="skip">
            <search><![CDATA[send(json['next']);]]></search>
            <add position="replace"><![CDATA[sendEmail(json['next']);]]></add>
        </operation>
        
		<operation error="skip">
            <search><![CDATA[$('textarea[name=\'message\']').html($('#input-message').code());]]></search>
            <add position="replace"><![CDATA[$('textarea[name=\'message\']').html(jQuery('textarea[name=\'message\']').val());]]></add>
        </operation>
    </file>
	
	<file path="admin/view/template/report/sale_order.tpl">
        <operation error="skip">
            <search><![CDATA[<button type="button" id="button-filter" class="btn btn-primary pull-right"><i class="fa fa-search"></i> <?php echo $button_filter; ?></button>]]></search>
            <add position="before"><![CDATA[
                <div class="form-group">
                    <label class="control-label" for="input-payment"><?php echo $entry_payment; ?></label>
                    <select name="filter_payment_code" id="input-payment" class="form-control">
                        <option value="0"><?php echo $text_all_payment; ?></option>
                        <?php foreach ($payment_methods as $payment_method) { ?>
                        <?php if ($payment_method['code'] == $filter_payment_code) { ?>
                        <option value="<?php echo $payment_method['code']; ?>" selected="selected"><?php echo $payment_method['title']; ?></option>
                        <?php } else { ?>
                        <option value="<?php echo $payment_method['code']; ?>"><?php echo $payment_method['title']; ?></option>
                        <?php } ?>
                        <?php } ?>
                    </select>
                </div>]]></add>
        </operation>
        <operation error="skip">
            <search><![CDATA[location = url;]]></search>
            <add position="before"><![CDATA[
    var filter_payment_code = $('select[name=\'filter_payment_code\']').val();

    if (filter_payment_code) {
        url += '&filter_payment_code=' + encodeURIComponent(filter_payment_code);
    }
    ]]></add>
        </operation>
    </file>

	<file path="admin/view/template/sale/customer_group_form.tpl">
        <operation error="skip">
            <search><![CDATA[<label class="col-sm-2 control-label"><?php echo $entry_name; ?></label>]]></search>
            <add position="before" offset="1"><![CDATA[            <div class="form-group required">
            <label class="col-sm-2 control-label">Joomla Group:</label>
            <div class="col-sm-10">
				<?php echo $jgroups; ?>
            </div>
          </div>]]></add>
        </operation>
    </file>
	
	<file path="admin/view/template/sale/order_form.tpl">
        <operation error="skip">
            <search><![CDATA[ name="option[]]></search>
            <add position="replace"><![CDATA[ name="option_oc[]]></add>
        </operation>
        
		<operation error="skip">
            <search><![CDATA[var url = 'index.php?route=sale/order/api]]></search>
            <add position="replace"><![CDATA[var url = 'index.php?route=sale/order/api&j_user_id=<?php echo JFactory::getUser()->get("id"); ?>]]></add>
        </operation>
		
		<operation error="skip">
            <search><![CDATA[url: 'index.php?route=sale/order/api]]></search>
            <add position="replace"><![CDATA[url: 'index.php?route=sale/order/api&j_user_id=<?php echo JFactory::getUser()->get("id"); ?>]]></add>
        </operation>
        
		<operation error="skip">
            <search><![CDATA[for (i in json['vouchers']) {]]></search>
            <add position="replace"><![CDATA[
                    for (i = 0; i <  json['vouchers'].length; i++) {
            ]]></add>
        </operation>
        
		<operation error="skip">
            <search><![CDATA[for (i in json['totals']) {]]></search>
            <add position="replace"><![CDATA[for (i = 0; i <  json['totals'].length; i++) {]]></add>
        </operation>
        
		<operation error="skip">
            <search><![CDATA[for (i in json['payment_methods']) {]]></search>
            <add position="after"><![CDATA[
							if(typeof json['payment_methods'][i] !== "object" ) {
								continue;
							}]]></add>
        </operation>
        
		<operation error="skip">
            <search><![CDATA[for (i in json['shipping_methods']) {]]></search>
            <add position="after"><![CDATA[
							if(typeof json['shipping_methods'][i] !== "object" ) {
								continue;
							}]]></add>
        </operation>
   </file>
	
	<file path="admin/view/template/sale/order_invoice.tpl">
        <operation error="skip">
            <search><![CDATA[<link type="text/css" href="view/stylesheet/stylesheet.css" rel="stylesheet" media="all" />]]></search>
            <add position="replace"><![CDATA[<link type="text/css" href="admin/view/stylesheet/stylesheet.css" rel="stylesheet" media="all" />]]></add>
        </operation>
  </file>

	<file path="admin/view/template/setting/setting.tpl">
		<operation error="skip">
			<search position="replace"><![CDATA[index.php?route=]]></search>
			<add><![CDATA[index.php?option=com_mijoshop&route=]]></add>
		</operation>
		
		<operation error="skip">
			<search><![CDATA[<label class="col-sm-2 control-label" for="input-icon"><?php echo $entry_icon; ?></label>]]></search>
			<add position="replace" offset="3"><![CDATA[]]></add>
		</operation>
		
		<operation error="skip">
			<search><![CDATA[<label class="col-sm-2 control-label"><span data-toggle="tooltip" title="<?php echo $help_seo_url; ?>"><?php echo $entry_seo_url; ?></span></label>]]></search>
			<add position="replace" offset="20"><![CDATA[]]></add>
		</operation>
   </file>

	<file path="admin/view/template/setting/store_form.tpl">
        <operation error="skip">
            <search><![CDATA[index.php?route=]]></search>
            <add position="replace"><![CDATA[index.php?option=com_mijoshop&route=]]></add>
        </operation>
        
		<operation error="skip">
            <search><![CDATA[<label class="col-sm-2 control-label" for="input-icon"><span data-toggle="tooltip" title="<?php echo $help_icon; ?>"><?php echo $entry_icon; ?></span></label>]]></search>
            <add position="replace" offset="3"><![CDATA[]]></add>
        </operation>
    </file>
	
    <file path="admin/view/template/user/user_group_form.tpl">
        <operation error="skip">
            <search><![CDATA[<div class="text-danger"><?php echo $error_name; ?></div>]]></search>
            <add position="after" offset="3"><![CDATA[		<div class="form-group required">
            <label class="col-sm-2 control-label" for="input-name">Joomla Group:</label>
            <div class="col-sm-10">
				<?php echo $jgroups; ?>
            </div>
          </div>]]></add>
        </operation>
    </file>

    <file path="admin/view/template/common/dashboard.tpl">
        <operation error="skip">
            <search><![CDATA[<ul class="breadcrumb">]]></search>
            <add position="replace"><![CDATA[<ul class="breadcrumb" style="display:none">]]></add>
        </operation>
    </file>
	
	<file path="admin/controller/catalog/product.php">
        <operation error="log">
            <search><![CDATA[if ((utf8_strlen($value['meta_title']) < 3) || (utf8_strlen($value['meta_title']) > 255)) {]]></search>
            <add position="replace" offset="2"><![CDATA[]]></add>
        </operation>
        <operation error="log">
            <search index="1"><![CDATA['required'             => $product_option['required']]]></search>
            <add position="replace"><![CDATA['required'             => (int)$product_option['required']]]></add>
        </operation>
    </file>
	
	<file path="admin/model/catalog/product.php">
        <operation error="log">
            <search><![CDATA[$this->event->trigger('pre.admin.product.add', $data);]]></search>
            <add position="after"><![CDATA[        #mijoshop-start
        foreach($data['product_description'] as $language_id => $value){
            if(empty($value['meta_title'])) {
                $data['product_description'][$language_id]['meta_title'] = $value['name'];
            }
        }
        #mijoshop-finish]]></add>
        </operation>

		<operation error="log">
            <search><![CDATA[$this->event->trigger('pre.admin.product.edit', $data);]]></search>
            <add position="after"><![CDATA[        #mijoshop-start
        foreach($data['product_description'] as $language_id => $value){
            if(empty($value['meta_title'])) {
                $data['product_description'][$language_id]['meta_title'] = $value['name'];
            }
        }
        #mijoshop-finish]]></add>
        </operation>
    </file>
	
	<file path="admin/controller/catalog/category.php">
        <operation error="log">
            <search><![CDATA[if ((utf8_strlen($value['meta_title']) < 3) || (utf8_strlen($value['meta_title']) > 255)) {]]></search>
            <add position="replace" offset="2"><![CDATA[]]></add>
        </operation>
    </file>
	
	<file path="admin/model/catalog/category.php">
        <operation error="log">
            <search><![CDATA[$this->event->trigger('pre.admin.category.add', $data);]]></search>
            <add position="after"><![CDATA[        #mijoshop-start
		foreach($data['category_description'] as $language_id => $value){
            if(empty($value['meta_title'])) {
                $data['category_description'][$language_id]['meta_title'] = $value['name'];
            }
        }
        #mijoshop-finish]]></add>
        </operation>

		<operation error="log">
            <search><![CDATA[$this->event->trigger('pre.admin.category.edit', $data);]]></search>
            <add position="after"><![CDATA[        #mijoshop-start
		foreach($data['category_description'] as $language_id => $value){
            if(empty($value['meta_title'])) {
                $data['category_description'][$language_id]['meta_title'] = $value['name'];
            }
        }
        #mijoshop-finish]]></add>
        </operation>
    </file>

	<file path="admin/controller/catalog/information.php">
        <operation error="log">
            <search><![CDATA[if ((utf8_strlen($value['meta_title']) < 3) || (utf8_strlen($value['meta_title']) > 255)) {]]></search>
            <add position="replace" offset="2"><![CDATA[]]></add>
        </operation>
    </file>
	
	<file path="admin/model/catalog/information.php">
        <operation error="log">
            <search><![CDATA[$this->event->trigger('pre.admin.information.add', $data);]]></search>
            <add position="after"><![CDATA[        #mijoshop-start
		foreach($data['information_description'] as $language_id => $value){
            if(empty($value['meta_title'])) {
                $data['information_description'][$language_id]['meta_title'] = $value['name'];
            }
        }
        #mijoshop-finish]]></add>
        </operation>

		<operation error="log">
            <search><![CDATA[$this->event->trigger('pre.admin.information.edit', $data);]]></search>
            <add position="after"><![CDATA[        #mijoshop-start
		foreach($data['information_description'] as $language_id => $value){
            if(empty($value['meta_title'])) {
                $data['information_description'][$language_id]['meta_title'] = $value['name'];
            }
        }
        #mijoshop-finish]]></add>
        </operation>
    </file>
	
	<file path="admin/view/template/common/filemanager.tpl">
        <operation error="log">
            <search><![CDATA[<div class="modal-body">]]></search>
            <add position="replace"><![CDATA[<div class="modal-body" style="overflow: auto;">]]></add>
        </operation>
    </file>
	
	<file path="admin/controller/catalog/product.php">
        <operation error="skip">
            <search index="1"><![CDATA[$this->load->model('catalog/option');]]></search>
            <add position="after"><![CDATA[			$this->load->model('tool/image');]]></add>
        </operation>
		
		<operation error="skip">
            <search><![CDATA['option'     => $option_data,]]></search>
            <add position="before"><![CDATA[                    'image'      => $this->model_tool_image->resize($result['image'], "45", "45"),]]></add>
        </operation>
    </file>
	
	<file path="admin/view/template/module/featured.tpl">
        <operation error="skip">
            <search><![CDATA[</form>]]></search>
            <add position="before"><![CDATA[		  <input type="hidden" name="feed" value="1" />]]></add>
        </operation>
    </file>

	<file path="admin/view/template/sale/order_info.tpl">
        <operation error="skip">
            <search><![CDATA[function changeStatus(){]]></search>
            <add position="after"><![CDATA[<?php if ($openbay) { ?>]]></add>
        </operation>

		<operation error="skip">
            <search><![CDATA[function changeStatus(){]]></search>
            <add position="after" offset="12"><![CDATA[<?php } ?>  ]]></add>
        </operation>
    </file>
    
    <file path="admin/view/template/module/html.tpl">
        <operation error="skip">
            <search><![CDATA[<textarea name="module_description[<?php echo $language['language_id']; ?>][description]" placeholder="<?php echo $entry_description; ?>" id="input-description<?php echo $language['language_id']; ?>" class="form-control"><?php echo isset($module_description[$language['language_id']]['description']) ? $module_description[$language['language_id']]['description'] : ''; ?></textarea>]]></search>
            <add position="replace"><![CDATA[<?php
                      $desc = isset($module_description[$language['language_id']]['description']) ? $module_description[$language['language_id']]['description'] : '';
                      echo MijoShop::get('base')->editor()->display("module_description[".$language['language_id']."][description]", $desc, '97% !important', '320', '50', '11');
                    ?>]]></add>
        </operation>
    </file>
</modification>